<!DOCTYPE html>
    <html>
    <head>
        <meta charset="UTF-8">
        <title>Make Illustrators Relationship Visible&colon; Final Report of ICE2604 Group 2</title>
        <style>
/* From extension vscode.markdown-math */
@font-face{font-family:KaTeX_AMS;src:url(fonts/KaTeX_AMS-Regular.woff2) format("woff2"),url(fonts/KaTeX_AMS-Regular.woff) format("woff"),url(fonts/KaTeX_AMS-Regular.ttf) format("truetype");font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Caligraphic;src:url(fonts/KaTeX_Caligraphic-Bold.woff2) format("woff2"),url(fonts/KaTeX_Caligraphic-Bold.woff) format("woff"),url(fonts/KaTeX_Caligraphic-Bold.ttf) format("truetype");font-weight:700;font-style:normal}@font-face{font-family:KaTeX_Caligraphic;src:url(fonts/KaTeX_Caligraphic-Regular.woff2) format("woff2"),url(fonts/KaTeX_Caligraphic-Regular.woff) format("woff"),url(fonts/KaTeX_Caligraphic-Regular.ttf) format("truetype");font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Fraktur;src:url(fonts/KaTeX_Fraktur-Bold.woff2) format("woff2"),url(fonts/KaTeX_Fraktur-Bold.woff) format("woff"),url(fonts/KaTeX_Fraktur-Bold.ttf) format("truetype");font-weight:700;font-style:normal}@font-face{font-family:KaTeX_Fraktur;src:url(fonts/KaTeX_Fraktur-Regular.woff2) format("woff2"),url(fonts/KaTeX_Fraktur-Regular.woff) format("woff"),url(fonts/KaTeX_Fraktur-Regular.ttf) format("truetype");font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Main;src:url(fonts/KaTeX_Main-Bold.woff2) format("woff2"),url(fonts/KaTeX_Main-Bold.woff) format("woff"),url(fonts/KaTeX_Main-Bold.ttf) format("truetype");font-weight:700;font-style:normal}@font-face{font-family:KaTeX_Main;src:url(fonts/KaTeX_Main-BoldItalic.woff2) format("woff2"),url(fonts/KaTeX_Main-BoldItalic.woff) format("woff"),url(fonts/KaTeX_Main-BoldItalic.ttf) format("truetype");font-weight:700;font-style:italic}@font-face{font-family:KaTeX_Main;src:url(fonts/KaTeX_Main-Italic.woff2) format("woff2"),url(fonts/KaTeX_Main-Italic.woff) format("woff"),url(fonts/KaTeX_Main-Italic.ttf) format("truetype");font-weight:400;font-style:italic}@font-face{font-family:KaTeX_Main;src:url(fonts/KaTeX_Main-Regular.woff2) format("woff2"),url(fonts/KaTeX_Main-Regular.woff) format("woff"),url(fonts/KaTeX_Main-Regular.ttf) format("truetype");font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Math;src:url(fonts/KaTeX_Math-BoldItalic.woff2) format("woff2"),url(fonts/KaTeX_Math-BoldItalic.woff) format("woff"),url(fonts/KaTeX_Math-BoldItalic.ttf) format("truetype");font-weight:700;font-style:italic}@font-face{font-family:KaTeX_Math;src:url(fonts/KaTeX_Math-Italic.woff2) format("woff2"),url(fonts/KaTeX_Math-Italic.woff) format("woff"),url(fonts/KaTeX_Math-Italic.ttf) format("truetype");font-weight:400;font-style:italic}@font-face{font-family:"KaTeX_SansSerif";src:url(fonts/KaTeX_SansSerif-Bold.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Bold.woff) format("woff"),url(fonts/KaTeX_SansSerif-Bold.ttf) format("truetype");font-weight:700;font-style:normal}@font-face{font-family:"KaTeX_SansSerif";src:url(fonts/KaTeX_SansSerif-Italic.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Italic.woff) format("woff"),url(fonts/KaTeX_SansSerif-Italic.ttf) format("truetype");font-weight:400;font-style:italic}@font-face{font-family:"KaTeX_SansSerif";src:url(fonts/KaTeX_SansSerif-Regular.woff2) format("woff2"),url(fonts/KaTeX_SansSerif-Regular.woff) format("woff"),url(fonts/KaTeX_SansSerif-Regular.ttf) format("truetype");font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Script;src:url(fonts/KaTeX_Script-Regular.woff2) format("woff2"),url(fonts/KaTeX_Script-Regular.woff) format("woff"),url(fonts/KaTeX_Script-Regular.ttf) format("truetype");font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Size1;src:url(fonts/KaTeX_Size1-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size1-Regular.woff) format("woff"),url(fonts/KaTeX_Size1-Regular.ttf) format("truetype");font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Size2;src:url(fonts/KaTeX_Size2-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size2-Regular.woff) format("woff"),url(fonts/KaTeX_Size2-Regular.ttf) format("truetype");font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Size3;src:url(fonts/KaTeX_Size3-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size3-Regular.woff) format("woff"),url(fonts/KaTeX_Size3-Regular.ttf) format("truetype");font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Size4;src:url(fonts/KaTeX_Size4-Regular.woff2) format("woff2"),url(fonts/KaTeX_Size4-Regular.woff) format("woff"),url(fonts/KaTeX_Size4-Regular.ttf) format("truetype");font-weight:400;font-style:normal}@font-face{font-family:KaTeX_Typewriter;src:url(fonts/KaTeX_Typewriter-Regular.woff2) format("woff2"),url(fonts/KaTeX_Typewriter-Regular.woff) format("woff"),url(fonts/KaTeX_Typewriter-Regular.ttf) format("truetype");font-weight:400;font-style:normal}.katex{font:normal 1.21em KaTeX_Main,Times New Roman,serif;line-height:1.2;text-indent:0;text-rendering:auto;border-color:currentColor}.katex *{-ms-high-contrast-adjust:none!important}.katex .katex-version:after{content:"0.13.0"}.katex .katex-mathml{position:absolute;clip:rect(1px,1px,1px,1px);padding:0;border:0;height:1px;width:1px;overflow:hidden}.katex .katex-html>.newline{display:block}.katex .base{position:relative;white-space:nowrap;width:-webkit-min-content;width:-moz-min-content;width:min-content}.katex .base,.katex .strut{display:inline-block}.katex .textbf{font-weight:700}.katex .textit{font-style:italic}.katex .textrm{font-family:KaTeX_Main}.katex .textsf{font-family:KaTeX_SansSerif}.katex .texttt{font-family:KaTeX_Typewriter}.katex .mathnormal{font-family:KaTeX_Math;font-style:italic}.katex .mathit{font-family:KaTeX_Main;font-style:italic}.katex .mathrm{font-style:normal}.katex .mathbf{font-family:KaTeX_Main;font-weight:700}.katex .boldsymbol{font-family:KaTeX_Math;font-weight:700;font-style:italic}.katex .amsrm,.katex .mathbb,.katex .textbb{font-family:KaTeX_AMS}.katex .mathcal{font-family:KaTeX_Caligraphic}.katex .mathfrak,.katex .textfrak{font-family:KaTeX_Fraktur}.katex .mathtt{font-family:KaTeX_Typewriter}.katex .mathscr,.katex .textscr{font-family:KaTeX_Script}.katex .mathsf,.katex .textsf{font-family:KaTeX_SansSerif}.katex .mathboldsf,.katex .textboldsf{font-family:KaTeX_SansSerif;font-weight:700}.katex .mathitsf,.katex .textitsf{font-family:KaTeX_SansSerif;font-style:italic}.katex .mainrm{font-family:KaTeX_Main;font-style:normal}.katex .vlist-t{display:inline-table;table-layout:fixed;border-collapse:collapse}.katex .vlist-r{display:table-row}.katex .vlist{display:table-cell;vertical-align:bottom;position:relative}.katex .vlist>span{display:block;height:0;position:relative}.katex .vlist>span>span{display:inline-block}.katex .vlist>span>.pstrut{overflow:hidden;width:0}.katex .vlist-t2{margin-right:-2px}.katex .vlist-s{display:table-cell;vertical-align:bottom;font-size:1px;width:2px;min-width:2px}.katex .vbox{display:inline-flex;flex-direction:column;align-items:baseline}.katex .hbox{width:100%}.katex .hbox,.katex .thinbox{display:inline-flex;flex-direction:row}.katex .thinbox{width:0;max-width:0}.katex .msupsub{text-align:left}.katex .mfrac>span>span{text-align:center}.katex .mfrac .frac-line{display:inline-block;width:100%;border-bottom-style:solid}.katex .hdashline,.katex .hline,.katex .mfrac .frac-line,.katex .overline .overline-line,.katex .rule,.katex .underline .underline-line{min-height:1px}.katex .mspace{display:inline-block}.katex .clap,.katex .llap,.katex .rlap{width:0;position:relative}.katex .clap>.inner,.katex .llap>.inner,.katex .rlap>.inner{position:absolute}.katex .clap>.fix,.katex .llap>.fix,.katex .rlap>.fix{display:inline-block}.katex .llap>.inner{right:0}.katex .clap>.inner,.katex .rlap>.inner{left:0}.katex .clap>.inner>span{margin-left:-50%;margin-right:50%}.katex .rule{display:inline-block;border:0 solid;position:relative}.katex .hline,.katex .overline .overline-line,.katex .underline .underline-line{display:inline-block;width:100%;border-bottom-style:solid}.katex .hdashline{display:inline-block;width:100%;border-bottom-style:dashed}.katex .sqrt>.root{margin-left:.27777778em;margin-right:-.55555556em}.katex .fontsize-ensurer.reset-size1.size1,.katex .sizing.reset-size1.size1{font-size:1em}.katex .fontsize-ensurer.reset-size1.size2,.katex .sizing.reset-size1.size2{font-size:1.2em}.katex .fontsize-ensurer.reset-size1.size3,.katex .sizing.reset-size1.size3{font-size:1.4em}.katex .fontsize-ensurer.reset-size1.size4,.katex .sizing.reset-size1.size4{font-size:1.6em}.katex .fontsize-ensurer.reset-size1.size5,.katex .sizing.reset-size1.size5{font-size:1.8em}.katex .fontsize-ensurer.reset-size1.size6,.katex .sizing.reset-size1.size6{font-size:2em}.katex .fontsize-ensurer.reset-size1.size7,.katex .sizing.reset-size1.size7{font-size:2.4em}.katex .fontsize-ensurer.reset-size1.size8,.katex .sizing.reset-size1.size8{font-size:2.88em}.katex .fontsize-ensurer.reset-size1.size9,.katex .sizing.reset-size1.size9{font-size:3.456em}.katex .fontsize-ensurer.reset-size1.size10,.katex .sizing.reset-size1.size10{font-size:4.148em}.katex .fontsize-ensurer.reset-size1.size11,.katex .sizing.reset-size1.size11{font-size:4.976em}.katex .fontsize-ensurer.reset-size2.size1,.katex .sizing.reset-size2.size1{font-size:.83333333em}.katex .fontsize-ensurer.reset-size2.size2,.katex .sizing.reset-size2.size2{font-size:1em}.katex .fontsize-ensurer.reset-size2.size3,.katex .sizing.reset-size2.size3{font-size:1.16666667em}.katex .fontsize-ensurer.reset-size2.size4,.katex .sizing.reset-size2.size4{font-size:1.33333333em}.katex .fontsize-ensurer.reset-size2.size5,.katex .sizing.reset-size2.size5{font-size:1.5em}.katex .fontsize-ensurer.reset-size2.size6,.katex .sizing.reset-size2.size6{font-size:1.66666667em}.katex .fontsize-ensurer.reset-size2.size7,.katex .sizing.reset-size2.size7{font-size:2em}.katex .fontsize-ensurer.reset-size2.size8,.katex .sizing.reset-size2.size8{font-size:2.4em}.katex .fontsize-ensurer.reset-size2.size9,.katex .sizing.reset-size2.size9{font-size:2.88em}.katex .fontsize-ensurer.reset-size2.size10,.katex .sizing.reset-size2.size10{font-size:3.45666667em}.katex .fontsize-ensurer.reset-size2.size11,.katex .sizing.reset-size2.size11{font-size:4.14666667em}.katex .fontsize-ensurer.reset-size3.size1,.katex .sizing.reset-size3.size1{font-size:.71428571em}.katex .fontsize-ensurer.reset-size3.size2,.katex .sizing.reset-size3.size2{font-size:.85714286em}.katex .fontsize-ensurer.reset-size3.size3,.katex .sizing.reset-size3.size3{font-size:1em}.katex .fontsize-ensurer.reset-size3.size4,.katex .sizing.reset-size3.size4{font-size:1.14285714em}.katex .fontsize-ensurer.reset-size3.size5,.katex .sizing.reset-size3.size5{font-size:1.28571429em}.katex .fontsize-ensurer.reset-size3.size6,.katex .sizing.reset-size3.size6{font-size:1.42857143em}.katex .fontsize-ensurer.reset-size3.size7,.katex .sizing.reset-size3.size7{font-size:1.71428571em}.katex .fontsize-ensurer.reset-size3.size8,.katex .sizing.reset-size3.size8{font-size:2.05714286em}.katex .fontsize-ensurer.reset-size3.size9,.katex .sizing.reset-size3.size9{font-size:2.46857143em}.katex .fontsize-ensurer.reset-size3.size10,.katex .sizing.reset-size3.size10{font-size:2.96285714em}.katex .fontsize-ensurer.reset-size3.size11,.katex .sizing.reset-size3.size11{font-size:3.55428571em}.katex .fontsize-ensurer.reset-size4.size1,.katex .sizing.reset-size4.size1{font-size:.625em}.katex .fontsize-ensurer.reset-size4.size2,.katex .sizing.reset-size4.size2{font-size:.75em}.katex .fontsize-ensurer.reset-size4.size3,.katex .sizing.reset-size4.size3{font-size:.875em}.katex .fontsize-ensurer.reset-size4.size4,.katex .sizing.reset-size4.size4{font-size:1em}.katex .fontsize-ensurer.reset-size4.size5,.katex .sizing.reset-size4.size5{font-size:1.125em}.katex .fontsize-ensurer.reset-size4.size6,.katex .sizing.reset-size4.size6{font-size:1.25em}.katex .fontsize-ensurer.reset-size4.size7,.katex .sizing.reset-size4.size7{font-size:1.5em}.katex .fontsize-ensurer.reset-size4.size8,.katex .sizing.reset-size4.size8{font-size:1.8em}.katex .fontsize-ensurer.reset-size4.size9,.katex .sizing.reset-size4.size9{font-size:2.16em}.katex .fontsize-ensurer.reset-size4.size10,.katex .sizing.reset-size4.size10{font-size:2.5925em}.katex .fontsize-ensurer.reset-size4.size11,.katex .sizing.reset-size4.size11{font-size:3.11em}.katex .fontsize-ensurer.reset-size5.size1,.katex .sizing.reset-size5.size1{font-size:.55555556em}.katex .fontsize-ensurer.reset-size5.size2,.katex .sizing.reset-size5.size2{font-size:.66666667em}.katex .fontsize-ensurer.reset-size5.size3,.katex .sizing.reset-size5.size3{font-size:.77777778em}.katex .fontsize-ensurer.reset-size5.size4,.katex .sizing.reset-size5.size4{font-size:.88888889em}.katex .fontsize-ensurer.reset-size5.size5,.katex .sizing.reset-size5.size5{font-size:1em}.katex .fontsize-ensurer.reset-size5.size6,.katex .sizing.reset-size5.size6{font-size:1.11111111em}.katex .fontsize-ensurer.reset-size5.size7,.katex .sizing.reset-size5.size7{font-size:1.33333333em}.katex .fontsize-ensurer.reset-size5.size8,.katex .sizing.reset-size5.size8{font-size:1.6em}.katex .fontsize-ensurer.reset-size5.size9,.katex .sizing.reset-size5.size9{font-size:1.92em}.katex .fontsize-ensurer.reset-size5.size10,.katex .sizing.reset-size5.size10{font-size:2.30444444em}.katex .fontsize-ensurer.reset-size5.size11,.katex .sizing.reset-size5.size11{font-size:2.76444444em}.katex .fontsize-ensurer.reset-size6.size1,.katex .sizing.reset-size6.size1{font-size:.5em}.katex .fontsize-ensurer.reset-size6.size2,.katex .sizing.reset-size6.size2{font-size:.6em}.katex .fontsize-ensurer.reset-size6.size3,.katex .sizing.reset-size6.size3{font-size:.7em}.katex .fontsize-ensurer.reset-size6.size4,.katex .sizing.reset-size6.size4{font-size:.8em}.katex .fontsize-ensurer.reset-size6.size5,.katex .sizing.reset-size6.size5{font-size:.9em}.katex .fontsize-ensurer.reset-size6.size6,.katex .sizing.reset-size6.size6{font-size:1em}.katex .fontsize-ensurer.reset-size6.size7,.katex .sizing.reset-size6.size7{font-size:1.2em}.katex .fontsize-ensurer.reset-size6.size8,.katex .sizing.reset-size6.size8{font-size:1.44em}.katex .fontsize-ensurer.reset-size6.size9,.katex .sizing.reset-size6.size9{font-size:1.728em}.katex .fontsize-ensurer.reset-size6.size10,.katex .sizing.reset-size6.size10{font-size:2.074em}.katex .fontsize-ensurer.reset-size6.size11,.katex .sizing.reset-size6.size11{font-size:2.488em}.katex .fontsize-ensurer.reset-size7.size1,.katex .sizing.reset-size7.size1{font-size:.41666667em}.katex .fontsize-ensurer.reset-size7.size2,.katex .sizing.reset-size7.size2{font-size:.5em}.katex .fontsize-ensurer.reset-size7.size3,.katex .sizing.reset-size7.size3{font-size:.58333333em}.katex .fontsize-ensurer.reset-size7.size4,.katex .sizing.reset-size7.size4{font-size:.66666667em}.katex .fontsize-ensurer.reset-size7.size5,.katex .sizing.reset-size7.size5{font-size:.75em}.katex .fontsize-ensurer.reset-size7.size6,.katex .sizing.reset-size7.size6{font-size:.83333333em}.katex .fontsize-ensurer.reset-size7.size7,.katex .sizing.reset-size7.size7{font-size:1em}.katex .fontsize-ensurer.reset-size7.size8,.katex .sizing.reset-size7.size8{font-size:1.2em}.katex .fontsize-ensurer.reset-size7.size9,.katex .sizing.reset-size7.size9{font-size:1.44em}.katex .fontsize-ensurer.reset-size7.size10,.katex .sizing.reset-size7.size10{font-size:1.72833333em}.katex .fontsize-ensurer.reset-size7.size11,.katex .sizing.reset-size7.size11{font-size:2.07333333em}.katex .fontsize-ensurer.reset-size8.size1,.katex .sizing.reset-size8.size1{font-size:.34722222em}.katex .fontsize-ensurer.reset-size8.size2,.katex .sizing.reset-size8.size2{font-size:.41666667em}.katex .fontsize-ensurer.reset-size8.size3,.katex .sizing.reset-size8.size3{font-size:.48611111em}.katex .fontsize-ensurer.reset-size8.size4,.katex .sizing.reset-size8.size4{font-size:.55555556em}.katex .fontsize-ensurer.reset-size8.size5,.katex .sizing.reset-size8.size5{font-size:.625em}.katex .fontsize-ensurer.reset-size8.size6,.katex .sizing.reset-size8.size6{font-size:.69444444em}.katex .fontsize-ensurer.reset-size8.size7,.katex .sizing.reset-size8.size7{font-size:.83333333em}.katex .fontsize-ensurer.reset-size8.size8,.katex .sizing.reset-size8.size8{font-size:1em}.katex .fontsize-ensurer.reset-size8.size9,.katex .sizing.reset-size8.size9{font-size:1.2em}.katex .fontsize-ensurer.reset-size8.size10,.katex .sizing.reset-size8.size10{font-size:1.44027778em}.katex .fontsize-ensurer.reset-size8.size11,.katex .sizing.reset-size8.size11{font-size:1.72777778em}.katex .fontsize-ensurer.reset-size9.size1,.katex .sizing.reset-size9.size1{font-size:.28935185em}.katex .fontsize-ensurer.reset-size9.size2,.katex .sizing.reset-size9.size2{font-size:.34722222em}.katex .fontsize-ensurer.reset-size9.size3,.katex .sizing.reset-size9.size3{font-size:.40509259em}.katex .fontsize-ensurer.reset-size9.size4,.katex .sizing.reset-size9.size4{font-size:.46296296em}.katex .fontsize-ensurer.reset-size9.size5,.katex .sizing.reset-size9.size5{font-size:.52083333em}.katex .fontsize-ensurer.reset-size9.size6,.katex .sizing.reset-size9.size6{font-size:.5787037em}.katex .fontsize-ensurer.reset-size9.size7,.katex .sizing.reset-size9.size7{font-size:.69444444em}.katex .fontsize-ensurer.reset-size9.size8,.katex .sizing.reset-size9.size8{font-size:.83333333em}.katex .fontsize-ensurer.reset-size9.size9,.katex .sizing.reset-size9.size9{font-size:1em}.katex .fontsize-ensurer.reset-size9.size10,.katex .sizing.reset-size9.size10{font-size:1.20023148em}.katex .fontsize-ensurer.reset-size9.size11,.katex .sizing.reset-size9.size11{font-size:1.43981481em}.katex .fontsize-ensurer.reset-size10.size1,.katex .sizing.reset-size10.size1{font-size:.24108004em}.katex .fontsize-ensurer.reset-size10.size2,.katex .sizing.reset-size10.size2{font-size:.28929605em}.katex .fontsize-ensurer.reset-size10.size3,.katex .sizing.reset-size10.size3{font-size:.33751205em}.katex .fontsize-ensurer.reset-size10.size4,.katex .sizing.reset-size10.size4{font-size:.38572806em}.katex .fontsize-ensurer.reset-size10.size5,.katex .sizing.reset-size10.size5{font-size:.43394407em}.katex .fontsize-ensurer.reset-size10.size6,.katex .sizing.reset-size10.size6{font-size:.48216008em}.katex .fontsize-ensurer.reset-size10.size7,.katex .sizing.reset-size10.size7{font-size:.57859209em}.katex .fontsize-ensurer.reset-size10.size8,.katex .sizing.reset-size10.size8{font-size:.69431051em}.katex .fontsize-ensurer.reset-size10.size9,.katex .sizing.reset-size10.size9{font-size:.83317261em}.katex .fontsize-ensurer.reset-size10.size10,.katex .sizing.reset-size10.size10{font-size:1em}.katex .fontsize-ensurer.reset-size10.size11,.katex .sizing.reset-size10.size11{font-size:1.19961427em}.katex .fontsize-ensurer.reset-size11.size1,.katex .sizing.reset-size11.size1{font-size:.20096463em}.katex .fontsize-ensurer.reset-size11.size2,.katex .sizing.reset-size11.size2{font-size:.24115756em}.katex .fontsize-ensurer.reset-size11.size3,.katex .sizing.reset-size11.size3{font-size:.28135048em}.katex .fontsize-ensurer.reset-size11.size4,.katex .sizing.reset-size11.size4{font-size:.32154341em}.katex .fontsize-ensurer.reset-size11.size5,.katex .sizing.reset-size11.size5{font-size:.36173633em}.katex .fontsize-ensurer.reset-size11.size6,.katex .sizing.reset-size11.size6{font-size:.40192926em}.katex .fontsize-ensurer.reset-size11.size7,.katex .sizing.reset-size11.size7{font-size:.48231511em}.katex .fontsize-ensurer.reset-size11.size8,.katex .sizing.reset-size11.size8{font-size:.57877814em}.katex .fontsize-ensurer.reset-size11.size9,.katex .sizing.reset-size11.size9{font-size:.69453376em}.katex .fontsize-ensurer.reset-size11.size10,.katex .sizing.reset-size11.size10{font-size:.83360129em}.katex .fontsize-ensurer.reset-size11.size11,.katex .sizing.reset-size11.size11{font-size:1em}.katex .delimsizing.size1{font-family:KaTeX_Size1}.katex .delimsizing.size2{font-family:KaTeX_Size2}.katex .delimsizing.size3{font-family:KaTeX_Size3}.katex .delimsizing.size4{font-family:KaTeX_Size4}.katex .delimsizing.mult .delim-size1>span{font-family:KaTeX_Size1}.katex .delimsizing.mult .delim-size4>span{font-family:KaTeX_Size4}.katex .nulldelimiter{display:inline-block;width:.12em}.katex .delimcenter,.katex .op-symbol{position:relative}.katex .op-symbol.small-op{font-family:KaTeX_Size1}.katex .op-symbol.large-op{font-family:KaTeX_Size2}.katex .accent>.vlist-t,.katex .op-limits>.vlist-t{text-align:center}.katex .accent .accent-body{position:relative}.katex .accent .accent-body:not(.accent-full){width:0}.katex .overlay{display:block}.katex .mtable .vertical-separator{display:inline-block;min-width:1px}.katex .mtable .arraycolsep{display:inline-block}.katex .mtable .col-align-c>.vlist-t{text-align:center}.katex .mtable .col-align-l>.vlist-t{text-align:left}.katex .mtable .col-align-r>.vlist-t{text-align:right}.katex .svg-align{text-align:left}.katex svg{display:block;position:absolute;width:100%;height:inherit;fill:currentColor;stroke:currentColor;fill-rule:nonzero;fill-opacity:1;stroke-width:1;stroke-linecap:butt;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1}.katex svg path{stroke:none}.katex img{border-style:none;min-width:0;min-height:0;max-width:none;max-height:none}.katex .stretchy{width:100%;display:block;position:relative;overflow:hidden}.katex .stretchy:after,.katex .stretchy:before{content:""}.katex .hide-tail{width:100%;position:relative;overflow:hidden}.katex .halfarrow-left{position:absolute;left:0;width:50.2%;overflow:hidden}.katex .halfarrow-right{position:absolute;right:0;width:50.2%;overflow:hidden}.katex .brace-left{position:absolute;left:0;width:25.1%;overflow:hidden}.katex .brace-center{position:absolute;left:25%;width:50%;overflow:hidden}.katex .brace-right{position:absolute;right:0;width:25.1%;overflow:hidden}.katex .x-arrow-pad{padding:0 .5em}.katex .cd-arrow-pad{padding:0 .55556em 0 .27778em}.katex .mover,.katex .munder,.katex .x-arrow{text-align:center}.katex .boxpad{padding:0 .3em}.katex .fbox,.katex .fcolorbox{box-sizing:border-box;border:.04em solid}.katex .cancel-pad{padding:0 .2em}.katex .cancel-lap{margin-left:-.2em;margin-right:-.2em}.katex .sout{border-bottom-style:solid;border-bottom-width:.08em}.katex .angl{box-sizing:border-content;border-top:.049em solid;border-right:.049em solid;margin-right:.03889em}.katex .anglpad{padding:0 .03889em}.katex .eqn-num:before{counter-increment:katexEqnNo;content:"(" counter(katexEqnNo) ")"}.katex .mml-eqn-num:before{counter-increment:mmlEqnNo;content:"(" counter(mmlEqnNo) ")"}.katex .mtr-glue{width:50%}.katex .cd-vert-arrow{display:inline-block;position:relative}.katex .cd-label-left{display:inline-block;position:absolute;right:calc(50% + .3em);text-align:left}.katex .cd-label-right{display:inline-block;position:absolute;left:calc(50% + .3em);text-align:right}.katex-display{display:block;margin:1em 0;text-align:center}.katex-display>.katex{display:block;text-align:center;white-space:nowrap}.katex-display>.katex>.katex-html{display:block;position:relative}.katex-display>.katex>.katex-html>.tag{position:absolute;right:0}.katex-display.leqno>.katex>.katex-html>.tag{left:0;right:auto}.katex-display.fleqn>.katex{text-align:left;padding-left:2em}body{counter-reset:katexEqnNo mmlEqnNo}

/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

.katex-error {
	color: var(--vscode-editorError-foreground);
}

</style>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css" integrity="sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j" crossorigin="anonymous">
<link href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/markdown.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Microsoft/vscode/extensions/markdown-language-features/media/highlight.css">
<style>
            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe WPC', 'Segoe UI', system-ui, 'Ubuntu', 'Droid Sans', sans-serif;
                font-size: 14px;
                line-height: 1.6;
            }
        </style>
        <style>
.task-list-item { list-style-type: none; } .task-list-item-checkbox { margin-left: -20px; vertical-align: middle; }
</style>
        <link href="Final_report.css" rel="stylesheet" type="text/css">
        <script src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script>
        
    </head>
    <body class="vscode-body vscode-light">
        <h1 id="make-illustrators-relationship-visible-final-report-of-ice2604-group-2">Make Illustrators Relationship Visible:<br> Final Report of ICE2604 Group 2</h1>
<p><img src="file:///c:\Users\HP\Desktop\To learn\电类工程导论\Final_project\ICE2604_Final_Project\Final report\img\logo.png"></img></p>
<h2 id="project-design">Project Design</h2>
<p>  There are numerous awesome illustrators and delicate illustrations on the internet.But have you ever thought how they are related to each other?<br>
  Our project aims to find and visualizing the relationship between each illustrator and illustration, by the means of <strong>illustrator map</strong> and <strong>illustration ranking &amp; trending</strong>.</p>
<h3 id="illustrator-map">Illustrator map</h3>
<p>  By static the tags of one illustrator's works and turn it to a vector, we can represent the style of an author as a vector. Plotting it one a graph and add following relationship as edges, we get the illustrator map.<br>
<img src="file:///c:\Users\HP\Desktop\To learn\电类工程导论\Final_project\ICE2604_Final_Project\Final report\img\word2vec.png"></img></p>
<h3 id="ranking--trending">Ranking &amp; Trending</h3>
<p>  By analyze the create date, tags and bookmarks of illustration, we can point out the trending and make predictions.
<img src="file:///c:\Users\HP\Desktop\To learn\电类工程导论\Final_project\ICE2604_Final_Project\Final report\img\trending.png"></img></p>
<hr>
<h2 id="data-and-crawler">Data and Crawler</h2>
<h3 id="crawler">Crawler</h3>
<h4 id="website-analysis">Website analysis</h4>
<p>  The data source of our project is <a href="http://pixiv.net">pixiv.net</a>, an online community of artist.<br>
The data we want include:</p>
<ul>
<li>The basic information of a illustrator</li>
<li>The following illustrators of one illustrator</li>
<li>The recent works of illustrators</li>
<li>The tags of an illustrator</li>
<li>The basic information of an illustration</li>
<li>The tags of an illustation</li>
</ul>
<p>  After looking into the XHR of the website, we find these information in two responses:</p>
<ul>
<li><code>https://www.pixiv.net/ajax/user/{userId}/illusts/tags?lang=zh</code></li>
<li><code>https://www.pixiv.net/ajax/user/{userId}/following?offset={}&amp;limit={}&amp;rest=show&amp;tag=&amp;lang=zh</code></li>
</ul>
<p>  The content looks like this:</p>
<pre><code class="language-json"><div><span class="hljs-comment">// /ajax/user/15158551/following</span>
{
	<span class="hljs-attr">&quot;error&quot;</span>: <span class="hljs-literal">false</span>,
	<span class="hljs-attr">&quot;message&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,
	<span class="hljs-attr">&quot;body&quot;</span>: {
		<span class="hljs-attr">&quot;users&quot;</span>: [
			{
				<span class="hljs-attr">&quot;userId&quot;</span>: <span class="hljs-string">&quot;15871673&quot;</span>,
				<span class="hljs-attr">&quot;userName&quot;</span>: <span class="hljs-string">&quot;ユウマ&quot;</span>,
				<span class="hljs-attr">&quot;profileImageUrl&quot;</span>: <span class="hljs-string">&quot;https://i.pximg.net/user-profile/img/2019/10/27/18/42/33/16468488_e4f111bf6b5e635c0a71caf767e8cc03_170.jpg&quot;</span>,
				<span class="hljs-attr">&quot;userComment&quot;</span>: <span class="hljs-string">&quot;...&quot;</span>,
				<span class="hljs-attr">&quot;following&quot;</span>: <span class="hljs-literal">false</span>,
				<span class="hljs-attr">&quot;followed&quot;</span>: <span class="hljs-literal">false</span>,
				<span class="hljs-attr">&quot;isBlocking&quot;</span>: <span class="hljs-literal">false</span>,
				<span class="hljs-attr">&quot;isMypixiv&quot;</span>: <span class="hljs-literal">false</span>,
				<span class="hljs-attr">&quot;illusts&quot;</span>: [
					{
						<span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-string">&quot;95076157&quot;</span>,
						<span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;『生にしがみつく あまーい味がするね』&quot;</span>,
						<span class="hljs-attr">&quot;illustType&quot;</span>: <span class="hljs-number">0</span>,
						<span class="hljs-attr">&quot;xRestrict&quot;</span>: <span class="hljs-number">0</span>,
						<span class="hljs-attr">&quot;restrict&quot;</span>: <span class="hljs-number">0</span>,
						<span class="hljs-attr">&quot;sl&quot;</span>: <span class="hljs-number">4</span>,
						<span class="hljs-attr">&quot;url&quot;</span>: <span class="hljs-string">&quot;https://i.pximg.net/c/250x250_80_a2/img-master/img/2021/12/28/00/52/42/95076157_p0_square1200.jpg&quot;</span>,
						<span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,
						<span class="hljs-attr">&quot;tags&quot;</span>: [
							<span class="hljs-string">&quot;創作&quot;</span>,
							<span class="hljs-string">&quot;オリジナル&quot;</span>
						],
						<span class="hljs-attr">&quot;userId&quot;</span>: <span class="hljs-string">&quot;15871673&quot;</span>,
						<span class="hljs-attr">&quot;userName&quot;</span>: <span class="hljs-string">&quot;ユウマ&quot;</span>,
						<span class="hljs-attr">&quot;width&quot;</span>: <span class="hljs-number">2480</span>,
						<span class="hljs-attr">&quot;height&quot;</span>: <span class="hljs-number">3508</span>,
						<span class="hljs-attr">&quot;pageCount&quot;</span>: <span class="hljs-number">1</span>,
						<span class="hljs-attr">&quot;isBookmarkable&quot;</span>: <span class="hljs-literal">true</span>,
						<span class="hljs-attr">&quot;bookmarkData&quot;</span>: <span class="hljs-literal">null</span>,
						<span class="hljs-attr">&quot;alt&quot;</span>: <span class="hljs-string">&quot;#創作 『生にしがみつく あまーい味がするね』 - ユウマ的插画&quot;</span>,
						<span class="hljs-attr">&quot;titleCaptionTranslation&quot;</span>: {
							<span class="hljs-attr">&quot;workTitle&quot;</span>: <span class="hljs-literal">null</span>,
							<span class="hljs-attr">&quot;workCaption&quot;</span>: <span class="hljs-literal">null</span>
						},
						<span class="hljs-attr">&quot;createDate&quot;</span>: <span class="hljs-string">&quot;2021-12-28T00:52:42+09:00&quot;</span>,
						<span class="hljs-attr">&quot;updateDate&quot;</span>: <span class="hljs-string">&quot;2021-12-28T00:52:42+09:00&quot;</span>,
						<span class="hljs-attr">&quot;isUnlisted&quot;</span>: <span class="hljs-literal">false</span>,
						<span class="hljs-attr">&quot;isMasked&quot;</span>: <span class="hljs-literal">false</span>,
						<span class="hljs-attr">&quot;profileImageUrl&quot;</span>: <span class="hljs-string">&quot;https://i.pximg.net/user-profile/img/2019/10/27/18/42/33/16468488_e4f111bf6b5e635c0a71caf767e8cc03_50.jpg&quot;</span>
					},
					...
				],
				<span class="hljs-attr">&quot;novels&quot;</span>: [],
				<span class="hljs-attr">&quot;acceptRequest&quot;</span>: <span class="hljs-literal">false</span>
			},
			...
		],
		<span class="hljs-attr">&quot;total&quot;</span>: <span class="hljs-number">86</span>,
		<span class="hljs-attr">&quot;followUserTags&quot;</span>: [],
		<span class="hljs-attr">&quot;zoneConfig&quot;</span>: {
			...
		},
		<span class="hljs-attr">&quot;extraData&quot;</span>: {
			...
		}
	}
}
</div></code></pre>
<pre><code class="language-json"><div><span class="hljs-comment">// /ajax/user/15158551/illusts/tags?lang=zh</span>
{
	<span class="hljs-attr">&quot;error&quot;</span>: <span class="hljs-literal">false</span>,
	<span class="hljs-attr">&quot;message&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,
	<span class="hljs-attr">&quot;body&quot;</span>: [
		{
			<span class="hljs-attr">&quot;tag&quot;</span>: <span class="hljs-string">&quot;オリジナル&quot;</span>,
			<span class="hljs-attr">&quot;tag_translation&quot;</span>: <span class="hljs-string">&quot;原创&quot;</span>,
			<span class="hljs-attr">&quot;tag_yomigana&quot;</span>: <span class="hljs-string">&quot;おりじなる&quot;</span>,
			<span class="hljs-attr">&quot;cnt&quot;</span>: <span class="hljs-number">77</span>
		},
		{
			<span class="hljs-attr">&quot;tag&quot;</span>: <span class="hljs-string">&quot;不思議の国のアリス&quot;</span>,
			<span class="hljs-attr">&quot;tag_translation&quot;</span>: <span class="hljs-string">&quot;爱丽丝梦游仙境&quot;</span>,
			<span class="hljs-attr">&quot;tag_yomigana&quot;</span>: <span class="hljs-string">&quot;ふしぎのくにのありす&quot;</span>,
			<span class="hljs-attr">&quot;cnt&quot;</span>: <span class="hljs-number">2</span>
		},
		...
	]
}
</div></code></pre>
<h4 id="make-requests">Make requests</h4>
<p>  We makes requests with the python module <code>requests</code>. Consider the anti reptile measures, we alse applied <code>clash</code> as the agent pool.<br>
  The pixiv has relatively loose anti reptile measures. It only checks <code>referrence</code> and <code>Cookie</code>.</p>
<pre><code class="language-python"><div><span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">makeRequest</span>(<span class="hljs-params">id</span>):</span>
    url=<span class="hljs-string">&#x27;https://www.pixiv.net/ajax/user/{}/following?offset=0&amp;limit=24&amp;rest=show&amp;tag=&amp;lang=zh&#x27;</span>.format(id)
    headers = {
        <span class="hljs-string">&#x27;user-agent&#x27;</span>: <span class="hljs-string">&#x27;Mozilla/5.0 (X11; Linux x86_64; rv:93.0) Gecko/20100101 Firefox/93.0&#x27;</span>,
        <span class="hljs-string">&#x27;cookie&#x27;</span>: <span class="hljs-string">&#x27;xxx&#x27;</span>,
        <span class="hljs-string">&#x27;referer&#x27;</span>: <span class="hljs-string">&#x27;https://www.pixiv.net/users/{}/following&#x27;</span>.format(id),
    }
    proxy = <span class="hljs-string">&#x27;127.0.0.1:7890&#x27;</span>
    proxies = {
        <span class="hljs-string">&#x27;http&#x27;</span>: <span class="hljs-string">&#x27;http//&#x27;</span> + proxy,
        <span class="hljs-string">&#x27;https&#x27;</span>: <span class="hljs-string">&#x27;https://&#x27;</span> + proxy,
    }
    <span class="hljs-keyword">for</span> retries <span class="hljs-keyword">in</span> range(MAX_RETRIES + <span class="hljs-number">1</span>):
        <span class="hljs-keyword">try</span>:
            response = requests.get(url, headers=headers, proxies=proxies).json()
            total = response[<span class="hljs-string">&#x27;body&#x27;</span>][<span class="hljs-string">&#x27;total&#x27;</span>]
            <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">24</span>, total, <span class="hljs-number">24</span>):
                url=<span class="hljs-string">&#x27;https://www.pixiv.net/ajax/user/{}/following?offset={}&amp;limit=24&amp;rest=show&amp;tag=&amp;lang=zh&#x27;</span>.format(id, i)
                partialResponse = requests.get(url, headers=headers, proxies=proxies).json()
                <span class="hljs-keyword">for</span> user <span class="hljs-keyword">in</span> partialResponse[<span class="hljs-string">&#x27;body&#x27;</span>][<span class="hljs-string">&#x27;users&#x27;</span>]:
                    response[<span class="hljs-string">&#x27;body&#x27;</span>][<span class="hljs-string">&#x27;users&#x27;</span>].append(user)
            <span class="hljs-keyword">break</span>
        <span class="hljs-keyword">except</span>:
            <span class="hljs-comment"># retry after 3 seconds</span>
            <span class="hljs-keyword">if</span> retries == <span class="hljs-number">0</span>:
                print(<span class="hljs-string">&#x27;: Network error. Retry in 3 seconds&#x27;</span>)
            <span class="hljs-keyword">elif</span> retries &lt; MAX_RETRIES:
                print(<span class="hljs-string">&#x27;: Retry {} failed...&#x27;</span>.format(retries+<span class="hljs-number">1</span>))
            <span class="hljs-keyword">else</span>:
                print(<span class="hljs-string">&#x27; exited.&#x27;</span>)
                visitingQueque.put(id)
                exit()
            time.sleep(<span class="hljs-number">3</span>)

    visited[id] = <span class="hljs-number">1</span>
    <span class="hljs-keyword">for</span> user <span class="hljs-keyword">in</span> response[<span class="hljs-string">&#x27;body&#x27;</span>][<span class="hljs-string">&#x27;users&#x27;</span>]:
        visitingQueque.put(user[<span class="hljs-string">&#x27;userId&#x27;</span>])
    <span class="hljs-keyword">return</span> response
</div></code></pre>
<h4 id="cawl-the-whole-net">Cawl the whole net</h4>
<p>  After finishing one illustrator, we want the cawler to retieve information of other illustrators as well. This can be realized by crawling the following of the current illustrator.<br>
  The following relationship constructs a directed graph of illustrators. If we traverse the net, we can get all the information we want. So, we search the net with BFS.</p>
<pre><code class="language-python"><div>visited = {}
visitingQueque = queue.Queue()

<span class="hljs-keyword">while</span>(len(visited) &lt; <span class="hljs-number">10000</span>):
    visitingId = visitingQueque.get()
    <span class="hljs-keyword">while</span> (visitingId <span class="hljs-keyword">in</span> visited) : 
        visitingId = visitingQueque.get()
    response = makeRequest(visitingId)
</div></code></pre>
<p>  Another version to crawl (the same solving ideas, but not as robust)</p>
<pre><code class="language-python"><div><span class="hljs-keyword">import</span> requests
<span class="hljs-keyword">import</span> collections
<span class="hljs-keyword">import</span> json
followers = []
ids=collections.deque()
id_used=[<span class="hljs-number">6662895</span>]
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">dumptojson</span>(<span class="hljs-params">res</span>):</span>
    fp = open(<span class="hljs-string">&#x27;homework.json&#x27;</span>, <span class="hljs-string">&#x27;w&#x27;</span>, encoding=<span class="hljs-string">&#x27;utf-8&#x27;</span>)
    json.dump(res, fp=fp, ensure_ascii=<span class="hljs-literal">False</span>)
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getSinglefollow1</span>(<span class="hljs-params">id</span>):</span>
    follower=[{<span class="hljs-string">&#x27;main_id&#x27;</span>:id}]
    headers = {
        <span class="hljs-string">&#x27;user-agent&#x27;</span>: <span class="hljs-string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.111 Safari/537.36&#x27;</span>,
        <span class="hljs-string">&#x27;cookie&#x27;</span>: <span class="hljs-string">&#x27;xxx&#x27;</span>,
        <span class="hljs-string">&#x27;referer&#x27;</span>: <span class="hljs-string">&#x27;https://www.pixiv.net/users/&#x27;</span> + id + <span class="hljs-string">&#x27;/following&#x27;</span>,
    }
    url = <span class="hljs-string">&#x27;https://www.pixiv.net/ajax/user/&#x27;</span>+id+<span class="hljs-string">&#x27;/following?offset=0&amp;limit=24&amp;rest=show&amp;tag=&amp;lang=zh&#x27;</span>
    response =requests.get(url, headers=headers).json()
    total = response[<span class="hljs-string">&#x27;body&#x27;</span>][<span class="hljs-string">&#x27;total&#x27;</span>]
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">0</span>,total,<span class="hljs-number">24</span>):
        url=<span class="hljs-string">&#x27;https://www.pixiv.net/ajax/user/&#x27;</span>+id+<span class="hljs-string">&#x27;/following?offset=&#x27;</span>+str(i*<span class="hljs-number">24</span>)+<span class="hljs-string">&#x27;&amp;limit=24&amp;rest=show&amp;tag=&amp;lang=zh&#x27;</span>
        response = requests.get(url, headers=headers).json()
        users = response[<span class="hljs-string">&#x27;body&#x27;</span>][<span class="hljs-string">&#x27;users&#x27;</span>]
        <span class="hljs-keyword">for</span> user <span class="hljs-keyword">in</span> users:
            id = user[<span class="hljs-string">&#x27;userId&#x27;</span>]
            <span class="hljs-keyword">if</span>(id <span class="hljs-keyword">not</span> <span class="hljs-keyword">in</span> id_used):
                ids.append(id)
            username = user[<span class="hljs-string">&#x27;userName&#x27;</span>]
            illusts = user[<span class="hljs-string">&#x27;illusts&#x27;</span>]
            imgs_id = []
            imgs_title = []
            imgs_url = []
            <span class="hljs-keyword">for</span> illust <span class="hljs-keyword">in</span> illusts:
                img_id = illust[<span class="hljs-string">&#x27;id&#x27;</span>]
                img_title = illust[<span class="hljs-string">&#x27;title&#x27;</span>]
                img_url = illust[<span class="hljs-string">&#x27;url&#x27;</span>]
                imgs_id.append(img_id)
                imgs_title.append(img_title)
                imgs_url.append(img_url)
            follower.append({<span class="hljs-string">&#x27;id&#x27;</span>: id, <span class="hljs-string">&#x27;username&#x27;</span>: username, <span class="hljs-string">&#x27;img_id&#x27;</span>: imgs_id, <span class="hljs-string">&#x27;img_title&#x27;</span>: imgs_title, <span class="hljs-string">&#x27;img_url&#x27;</span>: imgs_url})
    <span class="hljs-keyword">return</span> follower
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">getAllfollow</span>():</span>
    <span class="hljs-keyword">global</span> repeat
    follower=[{<span class="hljs-string">&#x27;main_id&#x27;</span>:<span class="hljs-string">&#x27;6662895&#x27;</span>}]
    s=requests.session()
    url = <span class="hljs-string">&#x27;https://www.pixiv.net/ajax/user/6662895/following?offset=0&amp;limit=24&amp;rest=show&amp;tag=&amp;lang=zh&#x27;</span>
    headers1 = {
        <span class="hljs-string">&#x27;user-agent&#x27;</span>: <span class="hljs-string">&#x27;Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/86.0.4240.111 Safari/537.36&#x27;</span>,
        <span class="hljs-string">&#x27;cookie&#x27;</span>: <span class="hljs-string">&#x27;xxx&#x27;</span>,
        <span class="hljs-string">&#x27;referer&#x27;</span>: <span class="hljs-string">&#x27;https://www.pixiv.net/users/6662895/following&#x27;</span>,
    }
    response = s.get(url, headers=headers1).json()
    total= response[<span class="hljs-string">&#x27;body&#x27;</span>][<span class="hljs-string">&#x27;total&#x27;</span>]
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(<span class="hljs-number">0</span>,total,<span class="hljs-number">24</span>):
        url=<span class="hljs-string">&#x27;https://www.pixiv.net/ajax/user/6662895/following?offset=&#x27;</span>+str(i)+<span class="hljs-string">&#x27;&amp;limit=24&amp;rest=show&amp;tag=&amp;lang=zh&#x27;</span>
        response = s.get(url, headers=headers1).json()
        users = response[<span class="hljs-string">&#x27;body&#x27;</span>][<span class="hljs-string">&#x27;users&#x27;</span>]
        <span class="hljs-keyword">for</span> user <span class="hljs-keyword">in</span> users:
            id = user[<span class="hljs-string">&#x27;userId&#x27;</span>]
            ids.append(id)
            username=user[<span class="hljs-string">&#x27;userName&#x27;</span>]
            illusts=user[<span class="hljs-string">&#x27;illusts&#x27;</span>]
            imgs_id=[]
            imgs_title=[]
            imgs_url=[]
            <span class="hljs-keyword">for</span> illust <span class="hljs-keyword">in</span> illusts:
                img_id=illust[<span class="hljs-string">&#x27;id&#x27;</span>]
                img_title=illust[<span class="hljs-string">&#x27;title&#x27;</span>]
                img_url=illust[<span class="hljs-string">&#x27;url&#x27;</span>]
                imgs_id.append(img_id)
                imgs_title.append(img_title)
                imgs_url.append(img_url)
            follower.append({<span class="hljs-string">&#x27;id&#x27;</span>:id,<span class="hljs-string">&#x27;username&#x27;</span>:username,<span class="hljs-string">&#x27;img_id&#x27;</span>:imgs_id,<span class="hljs-string">&#x27;img_title&#x27;</span>:imgs_title,<span class="hljs-string">&#x27;img_url&#x27;</span>:imgs_url})
        followers.append(follower)
    <span class="hljs-keyword">while</span>(len(id_used)&lt;<span class="hljs-number">10000</span>):
        cur_id=ids.popleft()
        id_used.append(cur_id)
        followers.append(getSinglefollow1(cur_id))
    print(len(ids))
    <span class="hljs-keyword">return</span> followers
res=getAllfollow()
dumptojson(res)
</div></code></pre>
<h4 id="multi-threading">Multi-threading</h4>
<p>  Consider the network I/O takes up most of the time, it is necessary to apply multithreading. In this case, we spawned 4 threads.<br>
  The <code>visitingQueue</code> can serve as the scheduler of the threads.</p>
<h3 id="data-sifting">Data Sifting</h3>
<p>  To start with, what we had was the raw infomation we clawled from the Pixiv website in the form of <strong>.json</strong>. Which was heavily repeated and took up about 15GB memories after unzipped.<br>
  The smallest one of them is like like this:</p>
<pre><code class="language-json"><div>{
  <span class="hljs-attr">&quot;error&quot;</span>: <span class="hljs-literal">false</span>,
  <span class="hljs-attr">&quot;message&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,
  <span class="hljs-attr">&quot;body&quot;</span>: {
    <span class="hljs-attr">&quot;users&quot;</span>: [],
    <span class="hljs-attr">&quot;total&quot;</span>: <span class="hljs-number">0</span>,
    <span class="hljs-attr">&quot;followUserTags&quot;</span>: [],
    <span class="hljs-attr">&quot;zoneConfig&quot;</span>: {
      ...
    },
    <span class="hljs-attr">&quot;extraData&quot;</span>: {
      <span class="hljs-attr">&quot;meta&quot;</span>: {
        ...
      }
    }
  }
}
</div></code></pre>
<p>  The useful part of infomation is in <code>json.load(f)[&quot;body&quot;][&quot;users&quot;]</code>, and it's empty here, which means this user whose <strong>userId</strong> is <code>&quot;12138318&quot;</code> doesn't follow any other users. That's also the reason this file is the smallest.<br>
  In the list of <code>json.load(f)[&quot;body&quot;][&quot;users&quot;]</code> are all of the users that this user is following. And all we need to do is collect their userIds because <strong>userId</strong> can convey the infomation between them.<br>
  However, there's one problem. Fisrt, we have no infomation about users themselves. If we colloct only the <strong>userId</strong>, all we would got is some numbers. And there's no more infomation about the user himself in his own json file. So we need to get the infomation from other users that are following this user. Doing this has a risk that if one user isn't being followed by other user then hinself would have no detailed infomation. We won't even know his userName.<br>
  Luckily, we could prove that every user in the dir has someone following him except one because Huang haoxv collected them using DFS method and all of the users we saved must has someone following him except the first user chosen to be the start node.<br>
  A single elem in <code>json.load(f)[&quot;body&quot;][&quot;users&quot;]</code> would be like this:</p>
<pre><code class="language-json"><div>{
    <span class="hljs-attr">&quot;userId&quot;</span>: <span class="hljs-string">&quot;12331100&quot;</span>,
    <span class="hljs-attr">&quot;userName&quot;</span>: <span class="hljs-string">&quot;飲用海&quot;</span>,
    <span class="hljs-attr">&quot;profileImageUrl&quot;</span>: <span class="hljs-string">&quot;https://i.pximg.net/user-profile/img/2021/08/28/11/48/2021311004_c1b0ddbb900a4a72f3150b8f82de6026_170.jpg&quot;</span>,
    <span class="hljs-attr">&quot;userComment&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,
    ...
    <span class="hljs-attr">&quot;illusts&quot;</span>: [
      {
        <span class="hljs-attr">&quot;id&quot;</span>: <span class="hljs-string">&quot;94014080&quot;</span>,
        <span class="hljs-attr">&quot;title&quot;</span>: <span class="hljs-string">&quot;まふゆ&quot;</span>,
        ...
        <span class="hljs-attr">&quot;url&quot;</span>: <span class="hljs-string">&quot;https://i.pximg.net/c/250x250_80_a2/custom-thumb/img/2021/11/09/02/08/51/94014080_p0_custom1200.jpg&quot;</span>,
        <span class="hljs-attr">&quot;description&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,
        <span class="hljs-attr">&quot;tags&quot;</span>: [
          <span class="hljs-string">&quot;プロジェクトセカイ&quot;</span>,
          <span class="hljs-string">&quot;プロセカ&quot;</span>,
          <span class="hljs-string">&quot;25時、ナイトコードで。&quot;</span>,
          <span class="hljs-string">&quot;朝比奈まふゆ&quot;</span>,
          <span class="hljs-string">&quot;プロセカ100users入り&quot;</span>
        ],
        ...
        <span class="hljs-attr">&quot;createDate&quot;</span>: <span class="hljs-string">&quot;2021-11-09T02:08:51+09:00&quot;</span>,
        <span class="hljs-attr">&quot;updateDate&quot;</span>: <span class="hljs-string">&quot;2021-11-09T02:08:51+09:00&quot;</span>,
        ...
      },
      ...
    ],
    ...
}
</div></code></pre>
<p>  It's cozy that there're four illusts in <code>json.load(f)[&quot;body&quot;][&quot;users&quot;][&quot;illusts&quot;]</code>. As you could see, the infomation we could collect contains:</p>
<ul>
<li>userId</li>
<li>userName</li>
<li>userComment</li>
<li>profileImageUrl</li>
<li>illusts</li>
<li>createDate</li>
</ul>
<p>  And with the following relation we got, we made two tables in MySQL like this:</p>
<table>
<thead>
<tr>
<th style="text-align:center">Users</th>
<th style="text-align:center">illusts</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="file:///c:\Users\HP\Desktop\To learn\电类工程导论\Final_project\ICE2604_Final_Project\Final report\img\xjq_1.png" alt=""></td>
<td style="text-align:center"><img src="file:///c:\Users\HP\Desktop\To learn\电类工程导论\Final_project\ICE2604_Final_Project\Final report\img\xjq_2.png" alt=""></td>
</tr>
</tbody>
</table>
<p>  Here's the code that fills in the table:</p>
<pre><code class="language-python"><div><span class="hljs-keyword">import</span> json,os,pymysql
<span class="hljs-keyword">from</span> tqdm <span class="hljs-keyword">import</span> tqdm

users={files[:files.find(<span class="hljs-string">&#x27;.&#x27;</span>)] <span class="hljs-keyword">for</span> files <span class="hljs-keyword">in</span> os.listdir(<span class="hljs-string">&quot;responses&quot;</span>)}
d1,d,imgs,d2={},{},{},{}
<span class="hljs-keyword">for</span> User_ID <span class="hljs-keyword">in</span> tqdm(users):
    <span class="hljs-keyword">with</span> open(<span class="hljs-string">&quot;responses/{}.json&quot;</span>.format(User_ID),<span class="hljs-string">&quot;rb&quot;</span>) <span class="hljs-keyword">as</span> f:
        a=json.load(f)[<span class="hljs-string">&quot;body&quot;</span>][<span class="hljs-string">&quot;users&quot;</span>]
    d1_User_ID=[]
    <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> a:
        <span class="hljs-keyword">if</span> _[<span class="hljs-string">&quot;userId&quot;</span>] <span class="hljs-keyword">in</span> users:
            d1_User_ID.append(_[<span class="hljs-string">&quot;userId&quot;</span>])
            <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> _[<span class="hljs-string">&quot;userId&quot;</span>] <span class="hljs-keyword">in</span> d:
                user={att:_[att] <span class="hljs-keyword">for</span> att <span class="hljs-keyword">in</span> [<span class="hljs-string">&quot;userId&quot;</span>,<span class="hljs-string">&quot;userName&quot;</span>,<span class="hljs-string">&quot;profileImageUrl&quot;</span>,<span class="hljs-string">&quot;userComment&quot;</span>]}
                user[<span class="hljs-string">&quot;illusts&quot;</span>]=[{att:his_imgs[att] <span class="hljs-keyword">for</span> att <span class="hljs-keyword">in</span> [<span class="hljs-string">&quot;id&quot;</span>,<span class="hljs-string">&quot;title&quot;</span>,<span class="hljs-string">&quot;url&quot;</span>,<span class="hljs-string">&quot;tags&quot;</span>]} <span class="hljs-keyword">for</span> his_imgs <span class="hljs-keyword">in</span> _[<span class="hljs-string">&quot;illusts&quot;</span>]]
                d[_[<span class="hljs-string">&quot;userId&quot;</span>]]=user
            <span class="hljs-keyword">for</span> img <span class="hljs-keyword">in</span> _[<span class="hljs-string">&quot;illusts&quot;</span>]:
                <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> img[<span class="hljs-string">&quot;id&quot;</span>] <span class="hljs-keyword">in</span> imgs:
                    imgs[img[<span class="hljs-string">&quot;id&quot;</span>]]={i:img[i] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> [<span class="hljs-string">&quot;id&quot;</span>,<span class="hljs-string">&quot;title&quot;</span>,<span class="hljs-string">&quot;url&quot;</span>,<span class="hljs-string">&quot;tags&quot;</span>,<span class="hljs-string">&quot;userId&quot;</span>,<span class="hljs-string">&quot;createDate&quot;</span>]}
    d1[User_ID]=d1_User_ID
<span class="hljs-keyword">del</span> User_ID,a,d1_User_ID,_,user,img
<span class="hljs-keyword">for</span> userId <span class="hljs-keyword">in</span> tqdm(d1):
    <span class="hljs-keyword">for</span> his_follows <span class="hljs-keyword">in</span> d1[userId]:
        <span class="hljs-keyword">if</span> his_follows <span class="hljs-keyword">in</span> d2:
            d2[his_follows]=d2[his_follows]+[userId]
        <span class="hljs-keyword">else</span>:
            d2[his_follows]=[userId]
<span class="hljs-keyword">del</span> userId,his_follows

conn=pymysql.connect(
    host=<span class="hljs-string">&quot;XXX&quot;</span>,
    port=xxx,
    user=<span class="hljs-string">&#x27;XXX&#x27;</span>,
    password=<span class="hljs-string">&quot;XXXX&quot;</span>,
    database=<span class="hljs-string">&#x27;XXXX&#x27;</span>,
    charset=<span class="hljs-string">&#x27;utf8mb4&#x27;</span>
)
cursor=conn.cursor()

tmp=[[d[userId][i] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> [<span class="hljs-string">&quot;userId&quot;</span>,<span class="hljs-string">&quot;userName&quot;</span>,<span class="hljs-string">&quot;profileImageUrl&quot;</span>,<span class="hljs-string">&quot;userComment&quot;</span>]]+[<span class="hljs-string">&quot;,&quot;</span>.join([_[<span class="hljs-string">&quot;id&quot;</span>] <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> d[userId][<span class="hljs-string">&#x27;illusts&#x27;</span>]]),<span class="hljs-string">&quot;,&quot;</span>.join(d1[userId]),len(d1[userId]),<span class="hljs-string">&quot;,&quot;</span>.join(d2[userId]),len(d2[userId])] <span class="hljs-keyword">for</span> userId <span class="hljs-keyword">in</span> d]
cursor.executemany(<span class="hljs-string">&quot;INSERT INTO Users (userId,userName,profileImageUrl,userComment,illusts,following,following_count,follower,follower_count) VALUES (%s,%s,%s,%s,%s,%s,%s,%s,%s)&quot;</span>,tmp)
conn.commit()
tmp=[[imgs[img_id][k] <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> [<span class="hljs-string">&quot;id&quot;</span>,<span class="hljs-string">&quot;title&quot;</span>,<span class="hljs-string">&quot;url&quot;</span>]]+[<span class="hljs-string">&quot;,&quot;</span>.join(imgs[img_id][<span class="hljs-string">&quot;tags&quot;</span>])]+[imgs[img_id][k] <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> [<span class="hljs-string">&quot;userId&quot;</span>,<span class="hljs-string">&quot;createDate&quot;</span>]] <span class="hljs-keyword">for</span> img_id <span class="hljs-keyword">in</span> imgs]
cursor.executemany(<span class="hljs-string">&quot;INSERT INTO illusts (id,title,url,tags,userId,createDate) VALUES (%s,%s,%s,%s,%s,%s)&quot;</span>,tmp)
conn.commit()
</div></code></pre>
<p>  Also, we used <code>tqdm</code> to add a process bar to visualize the procedure of the program.</p>
<hr>
<h2 id="search-engine">Search Engine</h2>
<p>  The search engine is based on Elastic Search. We aim to search illustrators and illustrations by id, name, tag.<br>
  Because we want the exact id, so the id is <code>keyword</code> type. The name/title and tags are text type.<br>
  Since the name, title and tags contain Chinese and Japanese, we tokenize them with an plugin <code>analysis-icu</code>.</p>
<pre><code class="language-python"><div><span class="hljs-comment"># index setting</span>
illusts_mappings = {
    <span class="hljs-string">&quot;settings&quot;</span>: {
        <span class="hljs-string">&quot;index&quot;</span>: {
            <span class="hljs-string">&quot;analysis&quot;</span>: {
                <span class="hljs-string">&quot;analyzer&quot;</span>: {
                    <span class="hljs-string">&quot;cjk_analyzer&quot;</span>: {
                        <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;custom&quot;</span>,
                        <span class="hljs-string">&quot;tokenizer&quot;</span> : <span class="hljs-string">&quot;icu_tokenizer&quot;</span>
                    }
                }
            }
        }
    },
    <span class="hljs-string">&quot;mappings&quot;</span> : {
        <span class="hljs-string">&quot;properties&quot;</span>: {
            <span class="hljs-string">&quot;id&quot;</span>: {
                <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;keyword&quot;</span>,
            },
            <span class="hljs-string">&quot;title&quot;</span>: {
                <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;text&quot;</span>,
                <span class="hljs-string">&quot;analyzer&quot;</span>: <span class="hljs-string">&quot;cjk_analyzer&quot;</span>
            },
            <span class="hljs-string">&quot;url&quot;</span>: {
                <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;keyword&quot;</span>,
            },
            <span class="hljs-string">&quot;tags&quot;</span>: {
                <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;text&quot;</span>,
                <span class="hljs-string">&quot;analyzer&quot;</span>: <span class="hljs-string">&quot;simple&quot;</span>
            },
            <span class="hljs-string">&quot;userId&quot;</span>: {
                <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;keyword&quot;</span>,
            },
            <span class="hljs-string">&quot;createDate&quot;</span>: {
                <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;keyword&quot;</span>,
            },
            <span class="hljs-string">&quot;bookmark_count&quot;</span>: {
                <span class="hljs-string">&quot;type&quot;</span>: <span class="hljs-string">&quot;long&quot;</span>,
            }
        }
    }
}

<span class="hljs-comment"># searcher</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">search</span>(<span class="hljs-params">self, key, method</span>):</span>
    <span class="hljs-string">&#x27;&#x27;&#x27; 搜索，返回一个由字典组成的列表结果。
    若没有满足条件返回None。
    method可以为 id, title, tags, userId, userName。
    当选取前三个时返回的是插画，选取后两个时返回的是画师&#x27;&#x27;&#x27;</span>
    searchQuery = {
        <span class="hljs-string">&#x27;query&#x27;</span>: {
            <span class="hljs-string">&#x27;match&#x27;</span>: {
                method: key
            }
        }
    }
    <span class="hljs-keyword">if</span> method <span class="hljs-keyword">in</span> [<span class="hljs-string">&#x27;id&#x27;</span>, <span class="hljs-string">&#x27;title&#x27;</span>, <span class="hljs-string">&#x27;tags&#x27;</span>]:
        result = self.es.search(index=<span class="hljs-string">&quot;illusts_index&quot;</span>, body=searchQuery)
        <span class="hljs-keyword">return</span> result[<span class="hljs-string">&#x27;hits&#x27;</span>][<span class="hljs-string">&#x27;hits&#x27;</span>]
    <span class="hljs-keyword">elif</span> method <span class="hljs-keyword">in</span> [<span class="hljs-string">&#x27;userId&#x27;</span>, <span class="hljs-string">&#x27;userName&#x27;</span>]:
        result = self.es.search(index=<span class="hljs-string">&#x27;users_index&#x27;</span>, body=searchQuery)
        <span class="hljs-keyword">return</span> result[<span class="hljs-string">&#x27;hits&#x27;</span>][<span class="hljs-string">&#x27;hits&#x27;</span>]
    <span class="hljs-keyword">else</span>:
        print(<span class="hljs-string">&#x27;No match result!&#x27;</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-literal">None</span>
</div></code></pre>
<hr>
<h2 id="visualization">Visualization</h2>
<h3 id="data-charts">Data Charts</h3>
<p>  We prepared a page called &quot;statics&quot; to show our data size and ranking lists of some data, aiming to enrich the content of our site.</p>
<p>  It mainly consists of 4 pictures, an authors ranking list,a tags ranking list, a development tendency chart of the tags in last 7 years and the word cloud picture of all the tags.</p>
<p>  Using the echarts, we can easily make these pictures.</p>
<h4 id="tools-used">Tools Used</h4>
<pre><code class="language-html"><div><span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/static/echarts.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/static/jquery.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/static/echarts-wordcloud1.js&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
</div></code></pre>
<p>  The third one is used for the wordcloud picture.</p>
<h4 id="data-acquisition">Data Acquisition</h4>
<p>  All the data come from our crawler and database.</p>
<p>  Through two ways, we can let the charts get the data.</p>
<h5 id="1-put-the-data-in-the-chartsdirect-access">1. put the data in the charts(direct access)</h5>
<p>like this:</p>
<pre><code class="language-js"><div>series: [...
    data: [<span class="hljs-number">51</span>,<span class="hljs-number">74</span>,<span class="hljs-number">147</span>,<span class="hljs-number">199</span>,<span class="hljs-number">395</span>,<span class="hljs-number">667</span>,<span class="hljs-number">3125</span>]
    ...]
</div></code></pre>
<h5 id="2-put-the-data-in-the-maincppasynchronous-access">2. put the data in the main.cpp(Asynchronous access)</h5>
<p>  It's more convenient to change the data througe this way.</p>
<p>like this:</p>
<pre><code class="language-python"><div><span class="hljs-meta">@app.route(&#x27;/data&#x27;, methods=[&#x27;GET&#x27;])</span>
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">get_data</span>():</span>
    data={
    <span class="hljs-string">&quot;categories&quot;</span>:[<span class="hljs-string">&quot;巨乳&quot;</span>,<span class="hljs-string">&quot;魅惑の谷間&quot;</span>,<span class="hljs-string">&quot;Fate/GrandOrder&quot;</span>,<span class="hljs-string">&quot;おっぱい&quot;</span> ,<span class="hljs-string">&quot;女の子&quot;</span>,<span class="hljs-string">&quot;オリジナル&quot;</span>],
    <span class="hljs-string">&quot;data&quot;</span>:[<span class="hljs-number">753</span>,  <span class="hljs-number">769</span>  ,<span class="hljs-number">896</span>,<span class="hljs-number">1184</span>,<span class="hljs-number">2990</span>,<span class="hljs-number">4306</span>],
     }
    <span class="hljs-keyword">return</span> json.dumps(data)

</div></code></pre>
<h4 id="layout">Layout</h4>
<p>  The four pictures are put on the website side by side.</p>
<pre><code class="language-html"><div>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;main1&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 50%;height: 600px;float:left;border: 1px solid rgb(0, 0, 0);&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;main3&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 50%;height: 600px;float:right;border: 1px solid rgb(0, 0, 0);&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;main2&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 50%;height: 700px;float:left;border: 1px solid rgb(0, 0, 0);&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;main4&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;width: 50%;height: 700px;float:right;border: 1px solid rgb(0, 0, 0);&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>

</div></code></pre>
<h4 id="the-pictures">The Pictures</h4>
<h5 id="1-two-normal-bar-charts">1. Two Normal Bar Charts.</h5>
<p>  The Asynchronous access one is like this:</p>
<pre><code class="language-js"><div><span class="hljs-keyword">var</span> mychart =echarts.init(<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&#x27;main1&#x27;</span>),<span class="hljs-string">&#x27;dark&#x27;</span>);
$.getJSON(<span class="hljs-string">&#x27;/data&#x27;</span>).done(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>)</span>{
    mychart.setOption({
    <span class="hljs-attr">color</span>: [ <span class="hljs-string">&#x27;#00DDFF&#x27;</span>],
    <span class="hljs-attr">title</span>:{
    <span class="hljs-attr">text</span>: <span class="hljs-string">&#x27;Top6 Tags&#x27;</span>,
    <span class="hljs-attr">x</span>:<span class="hljs-string">&#x27;center&#x27;</span>,
    <span class="hljs-attr">top</span>:<span class="hljs-string">&#x27;20&#x27;</span>,
    <span class="hljs-attr">textStyle</span>: {
    <span class="hljs-string">&quot;fontSize&quot;</span>: <span class="hljs-number">24</span>
    },
    },
    <span class="hljs-attr">tooltip</span>:{},
    <span class="hljs-attr">legend</span>:{
        <span class="hljs-attr">data</span>:[<span class="hljs-string">&quot;作品数&quot;</span>],
        <span class="hljs-attr">textStyle</span>: {
        <span class="hljs-string">&quot;fontSize&quot;</span>: <span class="hljs-number">16</span>
    },
    <span class="hljs-attr">x</span>:<span class="hljs-string">&#x27;right&#x27;</span>,
    },
   <span class="hljs-attr">yAxis</span>:{
        <span class="hljs-attr">type</span> : <span class="hljs-string">&#x27;category&#x27;</span>,
        <span class="hljs-attr">data</span>:data.categories,
        
        <span class="hljs-attr">axisLabel</span>: {
            <span class="hljs-attr">show</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">textStyle</span>: {
                <span class="hljs-attr">color</span>: <span class="hljs-string">&#x27;#FFFFFF&#x27;</span>,
            },
            <span class="hljs-attr">fontSize</span>: <span class="hljs-number">12.5</span>,
            <span class="hljs-attr">interval</span>:<span class="hljs-number">0</span>,  
            <span class="hljs-attr">rotate</span>:<span class="hljs-number">45</span>  

        },
        
    },

    <span class="hljs-attr">xAxis</span>:{ <span class="hljs-attr">axisLabel</span>: {
            <span class="hljs-attr">show</span>: <span class="hljs-literal">true</span>,
            <span class="hljs-attr">textStyle</span>: {
                <span class="hljs-attr">color</span>: <span class="hljs-string">&#x27;#FFFFFF&#x27;</span>,
            },
            <span class="hljs-attr">fontSize</span>: <span class="hljs-number">12.5</span>,
        },},
    <span class="hljs-attr">series</span>:[
        {
            <span class="hljs-attr">name</span>:<span class="hljs-string">&#x27;作品数&#x27;</span>,
            <span class="hljs-attr">type</span>:<span class="hljs-string">&#x27;bar&#x27;</span>,
            <span class="hljs-attr">data</span>:data.data,
            
        }
    ]
    });

</div></code></pre>
<p>  The direct access is similar, but cut</p>
<pre><code class="language-js"><div>$.getJSON(<span class="hljs-string">&#x27;/data&#x27;</span>).done(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">data</span>)
</span></div></code></pre>
<p>  The two pictures look like:</p>
<p><img src="file:///c:\Users\HP\Desktop\To learn\电类工程导论\Final_project\ICE2604_Final_Project\Final report\img\Top6 Painters.png"></img></p>
<p><img src="file:///c:\Users\HP\Desktop\To learn\电类工程导论\Final_project\ICE2604_Final_Project\Final report\img\Top6 Tags.png"></img></p>
<h5 id="2-the-tendency-chart">2. The Tendency Chart.</h5>
<p>  It's based on the basic bar charts but change the way to deal with the data.</p>
<p>  In the &quot;series&quot; section, add the &quot;areaStyle&quot;.</p>
<pre><code class="language-js"><div>series: [
            ...
            showSymbol: <span class="hljs-literal">false</span>,
            <span class="hljs-attr">areaStyle</span>: {
                <span class="hljs-attr">opacity</span>: <span class="hljs-number">0.8</span>,
                <span class="hljs-attr">color</span>: <span class="hljs-keyword">new</span> echarts.graphic.LinearGradient(<span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, [
                {
                    <span class="hljs-attr">offset</span>: <span class="hljs-number">0</span>,
                    <span class="hljs-attr">color</span>: <span class="hljs-string">&#x27;rgba(255, 131, 0)&#x27;</span>
                },
                {
                    <span class="hljs-attr">offset</span>: <span class="hljs-number">1</span>,
                    <span class="hljs-attr">color</span>: <span class="hljs-string">&#x27;rgba(124, 62, 76)&#x27;</span>
                }
                ])
            },
            <span class="hljs-attr">emphasis</span>: {
                <span class="hljs-attr">focus</span>: <span class="hljs-string">&#x27;series&#x27;</span>
            },
            <span class="hljs-attr">data</span>: ...
        ......
        ]
</div></code></pre>
<p>  It makes a picture like this, which can exhibit the tendency through years.</p>
<p><img src="file:///c:\Users\HP\Desktop\To learn\电类工程导论\Final_project\ICE2604_Final_Project\Final report\img\Tags tendency.png"></img></p>
<p>  It also can just focus on partial data like this.</p>
<p><img src="file:///c:\Users\HP\Desktop\To learn\电类工程导论\Final_project\ICE2604_Final_Project\Final report\img\tags tendency1.png"></img></p>
<h5 id="3-the-wordcloud-chart">3. The Wordcloud Chart.</h5>
<p>  We used a new js file to provide the function to make the wordcloud chart.</p>
<pre><code class="language-js"><div>&lt;script src=<span class="hljs-string">&quot;/static/echarts-wordcloud1.js&quot;</span>&gt;&lt;/script&gt;
</div></code></pre>
<p>  The chart is a little different from the bar charts, mainly the &quot;series&quot; part ,it used the color gradient function</p>
<p>  The different part is like this:</p>
<pre><code class="language-js"><div>    series: [ {
    <span class="hljs-attr">type</span>: <span class="hljs-string">&#x27;wordCloud&#x27;</span>,
    <span class="hljs-attr">gridSize</span>: <span class="hljs-number">2</span>,
    <span class="hljs-attr">sizeRange</span>: [<span class="hljs-number">12</span>, <span class="hljs-number">50</span>],
    <span class="hljs-attr">rotationRange</span>: [<span class="hljs-number">-90</span>, <span class="hljs-number">90</span>],
    <span class="hljs-attr">width</span>: <span class="hljs-number">1000</span>,
    <span class="hljs-attr">height</span>: <span class="hljs-number">1000</span>,
    <span class="hljs-attr">drawOutOfBound</span>: <span class="hljs-literal">true</span>,
    <span class="hljs-attr">textStyle</span>: {
        
            <span class="hljs-attr">color</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>{
                <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;rgb(&#x27;</span> + [
                    <span class="hljs-built_in">Math</span>.round(<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">160</span>),
                    <span class="hljs-built_in">Math</span>.round(<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">160</span>),
                    <span class="hljs-built_in">Math</span>.round(<span class="hljs-built_in">Math</span>.random() * <span class="hljs-number">160</span>)
                ].join(<span class="hljs-string">&#x27;,&#x27;</span>) + <span class="hljs-string">&#x27;)&#x27;</span>;
            
        },
        <span class="hljs-attr">emphasis</span>: {
            <span class="hljs-attr">shadowBlur</span>: <span class="hljs-number">10</span>,
            <span class="hljs-attr">shadowColor</span>: <span class="hljs-string">&#x27;#333&#x27;</span>
        }
    },
    <span class="hljs-attr">data</span>:data.word,}]
</div></code></pre>
<p>  The wordcloud picture look like this:
<img src="file:///c:\Users\HP\Desktop\To learn\电类工程导论\Final_project\ICE2604_Final_Project\Final report\img\echarts.png"></img></p>
<h3 id="map-data-visualization-tasks-and-realization-ideas">Map: Data Visualization Tasks and Realization Ideas</h3>
<h4 id="the-purpose-of-data-visualization">The purpose of data visualization</h4>
<p>  In our division of labor, visualization mainly includes the establishment of a relationship graph from the collected illustrators information, which is used to reflect the following relationship between the illustrators as a directed graph.</p>
<h4 id="realization-idea">Realization idea</h4>
<p>  Let's first establish the relationship graph between painters. The information we obtained from Pixiv includes followers of illustrators. So we set up several illustrators nodes and add directed edges between the nodes according to the followers information. For example, if illustrator A’s followers include illustrator B, we add an edge from node B to node A.</p>
<p>  Then we cluster the illustrators nodes by <strong>Kmeans</strong>. Because the information of the illustrators is collected and the tag information of the illustrations is recorded, we have counted the frequency of each tag appearing in each illustrators, through the tags between the illustrators similarity to cluster.</p>
<h4 id="major-difficulty">Major difficulty</h4>
<p>  The main software used in the visualization process is Gephi. However, when using Gephi for clustering algorithm, since the graph density is too large, it is difficult to form a clear classification between nodes, but it appears as a fairly uniform ball.</p>
<h4 id="final-solution">Final solution</h4>
<p>  In order to classify the painter nodes clearly, we use the <strong>Principal Component Analysis (PCA)</strong> algorithm. Consider each illustrator's tags as a multi-dimensional vector, and the frequency of each tag is the value of the corresponding component of the vector; tags not owned by the illustrator are the components with a value of 0. Through this process, we created an N-dimensional vector corresponding to each illustrator in an N-dimensional vector space, and then reduced the N-dimensional vector to two dimensions to draw the corresponding two-dimensional image.</p>
<p>  After the process of the PCA algorithm, the data is clustered according to the tags information of each node. Export the coordinate information and classification information of each node as a table file, and then import it into Gephi, using Geo Layout to lay out, coloring according to the coordinates, and finally output the svg image.</p>
<h4 id="final-code">Final code</h4>
<pre><code class="language-python"><div><span class="hljs-keyword">import</span> pymysql
<span class="hljs-comment"># retrieve data</span>
conn=pymysql.connect(
    host=<span class="hljs-string">&quot;xxx&quot;</span>,
    port=xxxx,
    user=<span class="hljs-string">&#x27;xxx&#x27;</span>,
    password=<span class="hljs-string">&quot;xxx&quot;</span>,
    database=<span class="hljs-string">&#x27;xxx&#x27;</span>,
    charset=<span class="hljs-string">&#x27;utf8mb4&#x27;</span>
)
cursor=conn.cursor()
cursor.execute(<span class="hljs-string">&quot;SELECT userId,tags from Users&quot;</span>)
a=cursor.fetchall()
d[<span class="hljs-string">&quot;a&quot;</span>]=a

b={str(a[i][<span class="hljs-number">0</span>]):eval(<span class="hljs-string">&quot;{&quot;</span>+a[i][<span class="hljs-number">1</span>]+<span class="hljs-string">&quot;}&quot;</span>) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(a))}

<span class="hljs-comment"># select tags for analysis</span>
tags={}
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> b:
    <span class="hljs-keyword">for</span> j <span class="hljs-keyword">in</span> b[i]:
        <span class="hljs-keyword">if</span> j <span class="hljs-keyword">in</span> tags:
            tags[j]+=<span class="hljs-number">1</span>
        <span class="hljs-keyword">else</span>:
            tags[j]=<span class="hljs-number">1</span>

tags={i <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> tags <span class="hljs-keyword">if</span> tags[i]&gt;<span class="hljs-number">50</span>}

tags=list(tags)

tmp_tags={i:ii <span class="hljs-keyword">for</span> ii,i <span class="hljs-keyword">in</span> enumerate(tags)}

<span class="hljs-keyword">import</span> numpy <span class="hljs-keyword">as</span> np
<span class="hljs-function"><span class="hljs-keyword">def</span> <span class="hljs-title">func</span>(<span class="hljs-params">x:dict</span>):</span>
    <span class="hljs-string">&#x27;&#x27;&#x27;word2vec&#x27;&#x27;&#x27;</span>
    ret=np.zeros(shape=(len(tags),))
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> x:
        <span class="hljs-keyword">if</span> i <span class="hljs-keyword">in</span> tmp_tags:
            ret[tmp_tags[i]]=x[i]
    total = sum(ret)
    <span class="hljs-keyword">if</span> (total &gt; <span class="hljs-number">0</span>):
        ret /= total
    <span class="hljs-keyword">return</span> ret

userIds=list(b.keys())

outp=np.vstack((func(b[i]) <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> userIds))

outp.shape
&gt;&gt;&gt;(<span class="hljs-number">4167</span>, <span class="hljs-number">3681</span>)


<span class="hljs-comment"># Standardization</span>
<span class="hljs-keyword">from</span> sklearn.preprocessing <span class="hljs-keyword">import</span> StandardScaler
x = StandardScaler().fit_transform(outp)
<span class="hljs-comment"># PCA</span>
<span class="hljs-keyword">from</span> sklearn.decomposition <span class="hljs-keyword">import</span> PCA
pca = PCA(n_components=<span class="hljs-number">2</span>)
principalComponents = pca.fit_transform(x)

<span class="hljs-comment"># convert to position on the plot</span>
pC=principalComponents*<span class="hljs-number">500</span>

pC[:,<span class="hljs-number">0</span>]*=<span class="hljs-number">1.5</span>
pC[:,<span class="hljs-number">1</span>]/=<span class="hljs-number">1.5</span>

position={}
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(userIds)):
    position[<span class="hljs-string">&quot;id_&quot;</span>+userIds[i]]=pC[i]

<span class="hljs-comment"># write to csv</span>
<span class="hljs-keyword">from</span> openpyxl <span class="hljs-keyword">import</span> Workbook
book = Workbook()
sheet = book.active
sheet.cell(row=<span class="hljs-number">1</span>, column=<span class="hljs-number">1</span>).value=<span class="hljs-string">&quot;userId&quot;</span>
sheet.cell(row=<span class="hljs-number">1</span>, column=<span class="hljs-number">2</span>).value=<span class="hljs-string">&quot;x&quot;</span>
sheet.cell(row=<span class="hljs-number">1</span>, column=<span class="hljs-number">3</span>).value=<span class="hljs-string">&quot;y&quot;</span>
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> range(len(userIds)):
    sheet.cell(row=i+<span class="hljs-number">2</span>, column=<span class="hljs-number">1</span>).value = userIds[i]
    sheet.cell(row=i+<span class="hljs-number">2</span>, column=<span class="hljs-number">2</span>).value = pC[i][<span class="hljs-number">0</span>]
    sheet.cell(row=i+<span class="hljs-number">2</span>, column=<span class="hljs-number">3</span>).value = pC[i][<span class="hljs-number">1</span>]

book.save(<span class="hljs-string">&#x27;write2cell.xlsx&#x27;</span>)
</div></code></pre>
<pre><code class="language-python"><div><span class="hljs-keyword">import</span> matplotlib.pyplot <span class="hljs-keyword">as</span> plt
plt.scatter(principalComponents[:,<span class="hljs-number">0</span>],principalComponents[:,<span class="hljs-number">1</span>])
plt.show()
</div></code></pre>
<p><img src="file:///c:\Users\HP\Desktop\To learn\电类工程导论\Final_project\ICE2604_Final_Project\Final report\img\PCA2_21_0.png" alt="png"></p>
<pre><code class="language-python"><div><span class="hljs-comment"># Clustering</span>
<span class="hljs-keyword">from</span> scipy.cluster.vq <span class="hljs-keyword">import</span> whiten
<span class="hljs-keyword">from</span> sklearn.cluster <span class="hljs-keyword">import</span> KMeans
whitened = whiten(principalComponents)
kmeans = KMeans(n_clusters=<span class="hljs-number">5</span>, random_state=<span class="hljs-number">0</span>).fit(whitened)
plt.scatter(whitened[kmeans.labels_==<span class="hljs-number">0</span>][:,<span class="hljs-number">0</span>], whitened[kmeans.labels_==<span class="hljs-number">0</span>][:,<span class="hljs-number">1</span>], c=<span class="hljs-string">&#x27;b&#x27;</span>)
plt.scatter(whitened[kmeans.labels_==<span class="hljs-number">1</span>][:,<span class="hljs-number">0</span>], whitened[kmeans.labels_==<span class="hljs-number">1</span>][:,<span class="hljs-number">1</span>], c=<span class="hljs-string">&#x27;c&#x27;</span>)
plt.scatter(whitened[kmeans.labels_==<span class="hljs-number">2</span>][:,<span class="hljs-number">0</span>], whitened[kmeans.labels_==<span class="hljs-number">2</span>][:,<span class="hljs-number">1</span>], c=<span class="hljs-string">&#x27;g&#x27;</span>)
plt.scatter(whitened[kmeans.labels_==<span class="hljs-number">3</span>][:,<span class="hljs-number">0</span>], whitened[kmeans.labels_==<span class="hljs-number">3</span>][:,<span class="hljs-number">1</span>], c=<span class="hljs-string">&#x27;k&#x27;</span>)
plt.scatter(whitened[kmeans.labels_==<span class="hljs-number">4</span>][:,<span class="hljs-number">0</span>], whitened[kmeans.labels_==<span class="hljs-number">4</span>][:,<span class="hljs-number">1</span>], c=<span class="hljs-string">&#x27;m&#x27;</span>)
</div></code></pre>
<p><img src="file:///c:\Users\HP\Desktop\To learn\电类工程导论\Final_project\ICE2604_Final_Project\Final report\img\PCA2_22_1.png" alt="png"></p>
<pre><code class="language-python"><div>print(kmeans.inertia_)
print(kmeans.n_features_in_)
</div></code></pre>
<pre><code>1401.1819077759367
2
</code></pre>
<pre><code class="language-python"><div><span class="hljs-comment"># Add text to the graph</span>
<span class="hljs-keyword">from</span> bs4 <span class="hljs-keyword">import</span> BeautifulSoup
<span class="hljs-keyword">with</span> open(<span class="hljs-string">&quot;index.html&quot;</span>,<span class="hljs-string">&quot;r&quot;</span>,encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> f:
    soup=BeautifulSoup(f.read(),<span class="hljs-string">&quot;lxml&quot;</span>)

dxdy={}
<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> soup.find_all(<span class="hljs-string">&quot;circle&quot;</span>):
    dxdy[i[<span class="hljs-string">&quot;class&quot;</span>][<span class="hljs-number">0</span>]]=[position[i[<span class="hljs-string">&quot;class&quot;</span>][<span class="hljs-number">0</span>]][<span class="hljs-number">0</span>]-float(i[<span class="hljs-string">&quot;cx&quot;</span>]),position[i[<span class="hljs-string">&quot;class&quot;</span>][<span class="hljs-number">0</span>]][<span class="hljs-number">1</span>]-float(i[<span class="hljs-string">&quot;cy&quot;</span>])]
    i[<span class="hljs-string">&quot;cx&quot;</span>]=str(position[i[<span class="hljs-string">&quot;class&quot;</span>][<span class="hljs-number">0</span>]][<span class="hljs-number">0</span>])
    i[<span class="hljs-string">&quot;cy&quot;</span>]=str(position[i[<span class="hljs-string">&quot;class&quot;</span>][<span class="hljs-number">0</span>]][<span class="hljs-number">1</span>])

<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> soup.find_all(<span class="hljs-string">&quot;path&quot;</span>):
    _=i[<span class="hljs-string">&quot;d&quot;</span>].split()
    _[<span class="hljs-number">1</span>]=<span class="hljs-string">&quot;{},{}&quot;</span>.format(*position[i[<span class="hljs-string">&quot;class&quot;</span>][<span class="hljs-number">0</span>]])
    _[<span class="hljs-number">3</span>]=<span class="hljs-string">&quot;{},{}&quot;</span>.format(*position[i[<span class="hljs-string">&quot;class&quot;</span>][<span class="hljs-number">1</span>]])
    i[<span class="hljs-string">&quot;d&quot;</span>]=<span class="hljs-string">&quot; &quot;</span>.join(_)

<span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> soup.find_all(<span class="hljs-string">&quot;text&quot;</span>):
    i[<span class="hljs-string">&quot;x&quot;</span>]=str(float(i[<span class="hljs-string">&quot;x&quot;</span>])+dxdy[i[<span class="hljs-string">&quot;class&quot;</span>][<span class="hljs-number">0</span>]][<span class="hljs-number">0</span>])
    i[<span class="hljs-string">&quot;y&quot;</span>]=str(float(i[<span class="hljs-string">&quot;y&quot;</span>])+dxdy[i[<span class="hljs-string">&quot;class&quot;</span>][<span class="hljs-number">0</span>]][<span class="hljs-number">1</span>])

<span class="hljs-keyword">with</span> open(<span class="hljs-string">&quot;jl.html&quot;</span>,<span class="hljs-string">&quot;w&quot;</span>,encoding=<span class="hljs-string">&quot;utf-8&quot;</span>) <span class="hljs-keyword">as</span> f:
    f.write(soup.prettify())
</div></code></pre>
<hr>
<h2 id="website">Website</h2>
<h3 id="page-harmony">Page harmony</h3>
<p>  The most difficult part of building a website is that it must combine all the work done that realize different features of it. At first, we didn't realize that our teamate will use so many different frames such as Jquery and Bootrap，not mention that the style is quite contradictary，the frames themselves arouse conficts.the most typical one is that the vue and flask all need <code>[]</code> to bond statics, so mistake like picture below happened.
<img src="file:///c:\Users\HP\Desktop\To learn\电类工程导论\Final_project\ICE2604_Final_Project\Final report\img\hcy_01.png" alt="">
  That is Vue and Flask's Jinja2 module reuse problems.<br>
  To slove this, we use code below:</p>
<pre><code class="language-python"><div>app.jinja_env.variable_start_string = <span class="hljs-string">&#x27;{[&#x27;</span>
app.jinja_env.variable_end_string = <span class="hljs-string">&#x27;]}&#x27;</span>
</div></code></pre>
<p>  But later we found different CSS can result that the page seems horribly messy. And things become troublesome especialy when it comes to locate which css make it perform like that. So although we want to make some interaction body using Vue, page harmony become so important that we have to weigh.<br>
  At first we try to use Bootstrap, but it seems not as perfect as we thought. Here's a rendering of our first version
<img src="file:///c:\Users\HP\Desktop\To learn\电类工程导论\Final_project\ICE2604_Final_Project\Final report\img\hcy_02.jpg" alt="">
  And the same, because Bootstrap's css is confict with one of our teammate's css, we have to find a template that is more compatible.<br>
  So we choose NicePage,
because all it's headers are approximately the same.</p>
<pre><code class="language-HTML"><div><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;font-size: 16px;&quot;</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;utf-8&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;keywords&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;Illustration <span class="hljs-symbol">&amp;amp;</span>amp; Art Guide&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;description&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;page_type&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;np-template-header-footer-from-plugin&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/static/nicepage.css&quot;</span> <span class="hljs-attr">media</span>=<span class="hljs-string">&quot;screen&quot;</span>&gt;</span>
<span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/static/Home.css&quot;</span> <span class="hljs-attr">media</span>=<span class="hljs-string">&quot;screen&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-script&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/static/jquery.js&quot;</span> <span class="hljs-attr">defer</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-script&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;text/javascript&quot;</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/static/nicepage.js&quot;</span> <span class="hljs-attr">defer</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;generator&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;Nicepage 4.1.0, nicepage.com&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;u-theme-google-font&quot;</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">link</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;u-page-google-font&quot;</span> <span class="hljs-attr">rel</span>=<span class="hljs-string">&quot;stylesheet&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://fonts.googleapis.com/css?family=Oswald:200,300,400,500,600,700&quot;</span>&gt;</span>
    
    
    
    
    <span class="hljs-tag">&lt;<span class="hljs-name">script</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;application/ld+json&quot;</span>&gt;</span><span class="javascript">{
		<span class="hljs-string">&quot;@context&quot;</span>: <span class="hljs-string">&quot;http://schema.org&quot;</span>,
		<span class="hljs-string">&quot;@type&quot;</span>: <span class="hljs-string">&quot;Organization&quot;</span>,
		<span class="hljs-string">&quot;name&quot;</span>: <span class="hljs-string">&quot;&quot;</span>,
		<span class="hljs-string">&quot;logo&quot;</span>: <span class="hljs-string">&quot;images/e1480079-83f8-6e77-e4f6-3ec006fc0d60.jpg&quot;</span>
}</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;theme-color&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;#478ac9&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;og:title&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;Home&quot;</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">property</span>=<span class="hljs-string">&quot;og:type&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;website&quot;</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-name">body</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-body u-overlap&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">header</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-align-center-xs u-border-1 u-border-grey-25 u-clearfix u-header u-header&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;sec-d1d3&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-clearfix u-sheet u-sheet-1&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;https://nicepage.com&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-image u-logo u-image-1&quot;</span> <span class="hljs-attr">data-image-width</span>=<span class="hljs-string">&quot;1080&quot;</span> <span class="hljs-attr">data-image-height</span>=<span class="hljs-string">&quot;1080&quot;</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;/static/images/20211223145559.png&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-logo-image u-logo-image-1&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">form</span> <span class="hljs-attr">action</span>=<span class="hljs-string">&quot;search&quot;</span> <span class="hljs-attr">method</span>=<span class="hljs-string">&quot;post&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-border-1 u-border-grey-15 u-search u-search-right u-search-1&quot;</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">button</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-search-button&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;submit&quot;</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">span</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-search-icon u-spacing-10 u-text-grey-40&quot;</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">svg</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-svg-link&quot;</span> <span class="hljs-attr">preserveAspectRatio</span>=<span class="hljs-string">&quot;xMidYMin slice&quot;</span> <span class="hljs-attr">viewBox</span>=<span class="hljs-string">&quot;0 0 56.966 56.966&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">use</span> <span class="hljs-attr">xmlns:xlink</span>=<span class="hljs-string">&quot;http://www.w3.org/1999/xlink&quot;</span> <span class="hljs-attr">xlink:href</span>=<span class="hljs-string">&quot;#svg-b04b&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">use</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">svg</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">svg</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="hljs-attr">xmlns:xlink</span>=<span class="hljs-string">&quot;http://www.w3.org/1999/xlink&quot;</span> <span class="hljs-attr">version</span>=<span class="hljs-string">&quot;1.1&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;svg-b04b&quot;</span> <span class="hljs-attr">x</span>=<span class="hljs-string">&quot;0px&quot;</span> <span class="hljs-attr">y</span>=<span class="hljs-string">&quot;0px&quot;</span> <span class="hljs-attr">viewBox</span>=<span class="hljs-string">&quot;0 0 56.966 56.966&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;enable-background:new 0 0 56.966 56.966;&quot;</span> <span class="hljs-attr">xml:space</span>=<span class="hljs-string">&quot;preserve&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-svg-content&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">path</span> <span class="hljs-attr">d</span>=<span class="hljs-string">&quot;M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23  s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92  c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17  s-17-7.626-17-17S14.61,6,23.984,6z&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">path</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">svg</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">span</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">button</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">input</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;info&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-search-input&quot;</span> <span class="hljs-attr">type</span>=<span class="hljs-string">&quot;search&quot;</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;search&quot;</span> <span class="hljs-attr">value</span>=<span class="hljs-string">&quot;&quot;</span> <span class="hljs-attr">placeholder</span>=<span class="hljs-string">&quot;Search&quot;</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">form</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">nav</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-align-left u-menu u-menu-dropdown u-nav-spacing-25 u-offcanvas u-menu-1&quot;</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;menu-collapse&quot;</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-button-style u-nav-link&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;#&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;padding: 4px 0px; font-size: calc(1em + 8px);&quot;</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">svg</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-svg-link&quot;</span> <span class="hljs-attr">preserveAspectRatio</span>=<span class="hljs-string">&quot;xMidYMin slice&quot;</span> <span class="hljs-attr">viewBox</span>=<span class="hljs-string">&quot;0 0 302 302&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">use</span> <span class="hljs-attr">xmlns:xlink</span>=<span class="hljs-string">&quot;http://www.w3.org/1999/xlink&quot;</span> <span class="hljs-attr">xlink:href</span>=<span class="hljs-string">&quot;#svg-7b92&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">use</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">svg</span>&gt;</span>
              <span class="hljs-tag">&lt;<span class="hljs-name">svg</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://www.w3.org/2000/svg&quot;</span> <span class="hljs-attr">xmlns:xlink</span>=<span class="hljs-string">&quot;http://www.w3.org/1999/xlink&quot;</span> <span class="hljs-attr">version</span>=<span class="hljs-string">&quot;1.1&quot;</span> <span class="hljs-attr">id</span>=<span class="hljs-string">&quot;svg-7b92&quot;</span> <span class="hljs-attr">x</span>=<span class="hljs-string">&quot;0px&quot;</span> <span class="hljs-attr">y</span>=<span class="hljs-string">&quot;0px&quot;</span> <span class="hljs-attr">viewBox</span>=<span class="hljs-string">&quot;0 0 302 302&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;enable-background:new 0 0 302 302;&quot;</span> <span class="hljs-attr">xml:space</span>=<span class="hljs-string">&quot;preserve&quot;</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-svg-content&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">rect</span> <span class="hljs-attr">y</span>=<span class="hljs-string">&quot;36&quot;</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;302&quot;</span> <span class="hljs-attr">height</span>=<span class="hljs-string">&quot;30&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">rect</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">rect</span> <span class="hljs-attr">y</span>=<span class="hljs-string">&quot;236&quot;</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;302&quot;</span> <span class="hljs-attr">height</span>=<span class="hljs-string">&quot;30&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">rect</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">rect</span> <span class="hljs-attr">y</span>=<span class="hljs-string">&quot;136&quot;</span> <span class="hljs-attr">width</span>=<span class="hljs-string">&quot;302&quot;</span> <span class="hljs-attr">height</span>=<span class="hljs-string">&quot;30&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">rect</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">g</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">svg</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-custom-menu u-nav-container&quot;</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-nav u-unstyled u-nav-1&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-nav-item&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/home&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;padding: 10px 20px;&quot;</span>&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-nav-item&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/static&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;padding: 10px 20px;&quot;</span>&gt;</span>Statics<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-nav-item&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/map&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;padding: 10px 20px;&quot;</span>&gt;</span>Map<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-nav-item&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/search&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;padding: 10px 20px;&quot;</span>&gt;</span>Search<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-nav-item&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/tags&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;padding: 10px 20px;&quot;</span>&gt;</span>Tags<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
                      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                      <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-custom-menu u-nav-container-collapse&quot;</span>&gt;</span>
                        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-align-center u-black u-container-style u-inner-container-layout u-opacity u-opacity-95 u-sidenav&quot;</span>&gt;</span>
                          <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-inner-container-layout u-sidenav-overflow&quot;</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-menu-close&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
                            <span class="hljs-tag">&lt;<span class="hljs-name">ul</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-align-center u-nav u-popupmenu-items u-unstyled u-nav-2&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-nav-item&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-button-style u-nav-link&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/home&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;padding: 10px 20px;&quot;</span>&gt;</span>Home<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-nav-item&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-button-style u-nav-link&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/static&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;padding: 10px 20px;&quot;</span>&gt;</span>Statics<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-nav-item&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-button-style u-nav-link&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/map&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;padding: 10px 20px;&quot;</span>&gt;</span>Map<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-nav-item&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-button-style u-nav-link&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/search&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;padding: 10px 20px;&quot;</span>&gt;</span>Search<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">li</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-nav-item&quot;</span>&gt;</span><span class="hljs-tag">&lt;<span class="hljs-name">a</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-button-style u-nav-link&quot;</span> <span class="hljs-attr">href</span>=<span class="hljs-string">&quot;/tags&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;padding: 10px 20px;&quot;</span>&gt;</span>Tags<span class="hljs-tag">&lt;/<span class="hljs-name">a</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">li</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">ul</span>&gt;</span>
              <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;u-black u-menu-overlay u-opacity u-opacity-70&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
          <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">nav</span>&gt;</span>
      <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">header</span>&gt;</span>
</div></code></pre>
<p>  And different page can use different css which make it easy to locate and make changes.
<img src="file:///c:\Users\HP\Desktop\To learn\电类工程导论\Final_project\ICE2604_Final_Project\Final report\img\hcy_03.jpg" alt="">
  For example, we want to change some image in the html, we first find it's id equal to u-image-1, and css is map.css,then we turn to map.css and
<img src="file:///c:\Users\HP\Desktop\To learn\电类工程导论\Final_project\ICE2604_Final_Project\Final report\img\hcy_04.jpg" alt=""></p>
<h3 id="valid-picture">Valid Picture</h3>
<p>  We already have the <strong>url</strong> of each image. However, the <strong>url</strong> is not only forbidden here but also could not request directly because their anti-crawler methods. At first, we thought of save all of the pictures to loacl. But after computing the approximate sizeof the images, we decided to give up. Not only because wet's too large to store, but also because the data charges are costly.<br>
  Suddenly, we thought of getting the image from other source. We found a mirror website of Pixiv and found that the <strong>url</strong> of this website is kind of similar to Pixiv. What we would have to do is converting <code>&quot;https://i.pximg.net/c/250x250_80_a2/img-master/img/2010/09/22/00/19/05/13399152_p0_square1200.jpg&quot;</code> to <code>https://proxy.pixivel.moe/img-original/img/2010/09/22/00/19/05/13399152_p0.jpg</code> or <code>https://proxy-jp1.pixivel.moe/c/600x1200_90/img-master/img/2010/09/22/00/19/05/13399152_p0_master1200.jpg</code>.<br>
  Here comes the problem that this mirror website is not good enough to provide all images we needed. In other word, some of the <strong>url</strong> is not valid.<br>
  To avoid our website from showing a lot of broken images, we need to check all the urls. Which is quite time consuming. Here's the code:</p>
<pre><code class="language-python"><div><span class="hljs-keyword">import</span> pymysql,json,os
<span class="hljs-keyword">from</span> tqdm <span class="hljs-keyword">import</span> tqdm
users=set()
<span class="hljs-keyword">for</span> files <span class="hljs-keyword">in</span> os.listdir(<span class="hljs-string">&quot;responses&quot;</span>):
    users.add(files[:files.find(<span class="hljs-string">&#x27;.&#x27;</span>)])
imgs=dict()
<span class="hljs-keyword">for</span> User_ID <span class="hljs-keyword">in</span> tqdm(users):
    <span class="hljs-keyword">with</span> open(<span class="hljs-string">&quot;responses/{}.json&quot;</span>.format(User_ID),<span class="hljs-string">&quot;rb&quot;</span>) <span class="hljs-keyword">as</span> f:
        <span class="hljs-keyword">for</span> _ <span class="hljs-keyword">in</span> json.load(f)[<span class="hljs-string">&quot;body&quot;</span>][<span class="hljs-string">&quot;users&quot;</span>]:
            <span class="hljs-keyword">if</span> _[<span class="hljs-string">&quot;userId&quot;</span>] <span class="hljs-keyword">in</span> users:
                <span class="hljs-keyword">for</span> img <span class="hljs-keyword">in</span> _[<span class="hljs-string">&quot;illusts&quot;</span>]:
                    <span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> img[<span class="hljs-string">&quot;id&quot;</span>] <span class="hljs-keyword">in</span> imgs:
                        imgs[img[<span class="hljs-string">&quot;id&quot;</span>]]={i:img[i] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> [<span class="hljs-string">&quot;id&quot;</span>,<span class="hljs-string">&quot;title&quot;</span>,<span class="hljs-string">&quot;url&quot;</span>,<span class="hljs-string">&quot;tags&quot;</span>,<span class="hljs-string">&quot;userId&quot;</span>,<span class="hljs-string">&quot;createDate&quot;</span>]}
conn=pymysql.connect(
    host=<span class="hljs-string">&quot;XXX&quot;</span>,
    port=xxx,
    user=<span class="hljs-string">&#x27;XXX&#x27;</span>,
    password=<span class="hljs-string">&quot;XXXX&quot;</span>,
    database=<span class="hljs-string">&#x27;XXXX&#x27;</span>,
    charset=<span class="hljs-string">&#x27;utf8mb4&#x27;</span>
)
cursor=conn.cursor()
tmp=[[imgs[img_id][k] <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> [<span class="hljs-string">&quot;id&quot;</span>,<span class="hljs-string">&quot;title&quot;</span>,<span class="hljs-string">&quot;url&quot;</span>]]+[<span class="hljs-string">&quot;,&quot;</span>.join(imgs[img_id][<span class="hljs-string">&quot;tags&quot;</span>])]+[imgs[img_id][k] <span class="hljs-keyword">for</span> k <span class="hljs-keyword">in</span> [<span class="hljs-string">&quot;userId&quot;</span>,<span class="hljs-string">&quot;createDate&quot;</span>]] <span class="hljs-keyword">for</span> img_id <span class="hljs-keyword">in</span> imgs]
cursor.executemany(<span class="hljs-string">&quot;INSERT INTO illusts (id,title,url,tags,userId,createDate) VALUES (%s,%s,%s,%s,%s,%s)&quot;</span>,tmp)
conn.commit()
</div></code></pre>
<p>    This took us about a whole day. And I'd have to run another. (<code>url_foruse</code> is a newly added col which stores the <strong>url</strong> that could be requestd directly)</p>
<pre><code class="language-python"><div><span class="hljs-keyword">import</span> requests,pymysql
<span class="hljs-keyword">from</span> tqdm <span class="hljs-keyword">import</span> tqdm
conn=pymysql.connect(
    host=<span class="hljs-string">&quot;XXX&quot;</span>,
    port=xxx,
    user=<span class="hljs-string">&#x27;XXX&#x27;</span>,
    password=<span class="hljs-string">&quot;XXXX&quot;</span>,
    database=<span class="hljs-string">&#x27;XXXX&#x27;</span>,
    charset=<span class="hljs-string">&#x27;utf8mb4&#x27;</span>
)
cursor=conn.cursor()
cursor.execute(<span class="hljs-string">&quot;SELECT id,url from illusts where url_foruse is NULL&quot;</span>)
ills=cursor.fetchall()

hea=<span class="hljs-string">&quot;&quot;&quot;Referer: XXXX
sec-ch-ua: XXXX
sec-ch-ua-mobile: XXXX
sec-ch-ua-platform: XXXXX
User-Agent: XXXXX&quot;&quot;&quot;</span>.split(<span class="hljs-string">&#x27;\n&#x27;</span>)
hea={i[:i.find(<span class="hljs-string">&#x27;:&#x27;</span>)].strip():i[i.find(<span class="hljs-string">&#x27;:&#x27;</span>)+<span class="hljs-number">1</span>:].strip() <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> hea}

<span class="hljs-keyword">for</span> ill <span class="hljs-keyword">in</span> tqdm(ills):
    _url=<span class="hljs-string">&quot;https://proxy.pixivel.moe/img-original/img/&quot;</span>+ill[<span class="hljs-number">1</span>][ill[<span class="hljs-number">1</span>].find(<span class="hljs-string">&quot;/img/&quot;</span>)+len(<span class="hljs-string">&quot;/img/&quot;</span>):].replace(<span class="hljs-string">&quot;_square1200.jpg&quot;</span>,<span class="hljs-string">&quot;.jpg&quot;</span>)
    resp=requests.get(_url,stream=<span class="hljs-literal">True</span>)
    <span class="hljs-keyword">if</span> resp.status_code==<span class="hljs-number">200</span>:
        cursor.execute(<span class="hljs-string">&quot;UPDATE illusts SET url_foruse=%s WHERE id=%s&quot;</span>,(_url,ill[<span class="hljs-number">0</span>]))
        conn.commit()
    <span class="hljs-keyword">else</span>:
        _url=<span class="hljs-string">&quot;https://proxy-jp1.pixivel.moe/c/600x1200_90/img-master/img/&quot;</span>+ill[<span class="hljs-number">1</span>][ill[<span class="hljs-number">1</span>].find(<span class="hljs-string">&quot;/img/&quot;</span>)+len(<span class="hljs-string">&quot;/img/&quot;</span>):ill[<span class="hljs-number">1</span>].find(ill[<span class="hljs-number">0</span>])+len(ill[<span class="hljs-number">0</span>])]+<span class="hljs-string">&quot;_p0_master1200.jpg&quot;</span>
        resp=requests.get(_url,stream=<span class="hljs-literal">True</span>)
        <span class="hljs-keyword">if</span> resp.status_code==<span class="hljs-number">200</span>:
            cursor.execute(<span class="hljs-string">&quot;UPDATE illusts SET url_foruse=%s WHERE id=%s&quot;</span>,(_url,ill[<span class="hljs-number">0</span>]))
            conn.commit()
        <span class="hljs-keyword">else</span>:
            cursor.execute(<span class="hljs-string">&quot;UPDATE illusts SET url_foruse=%s WHERE id=%s&quot;</span>,(<span class="hljs-string">&quot;None&quot;</span>,ill[<span class="hljs-number">0</span>]))
            conn.commit()
</div></code></pre>
<p>  At that time we havn't learnt much about <strong>html</strong> and <strong>js</strong> and didn't known about <code>onerror</code> of <code>&lt;img&gt;&lt;/img&gt;</code>. If I'd know that, we wouldn't run a program that is such time consuming.</p>
<pre><code class="language-html"><div><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="javascript">
    <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">imgerrorfun</span>(<span class="hljs-params">x</span>)</span>{
        <span class="hljs-keyword">var</span> img=event.srcElement;
        img.src=x;
        img.onerror=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
            event.srcElement.parentNode.parentNode.parentNode.remove();
        };
    }
</span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span>
...
<span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">...</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">...</span>&gt;</span>
        <span class="hljs-tag">&lt;<span class="hljs-name">div</span> <span class="hljs-attr">...</span>&gt;</span>
            <span class="hljs-tag">&lt;<span class="hljs-name">img</span> <span class="hljs-attr">src</span>=<span class="hljs-string">&quot;source_1.png&quot;</span> <span class="hljs-attr">onerror</span>=<span class="hljs-string">&#x27;imgerrorfun(&quot;source_2.png&quot;)&#x27;</span>/&gt;</span>
        <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-name">div</span>&gt;</span>
</div></code></pre>
<p>  By doing things like this, when <code>source_1.png</code> is not valid, the <code>src</code> would be changed to <code>source_2.png</code>, and when <code>source_2.png</code> is still not valid, the whole <strong>div</strong> that contains this img would be removed. Thus, the webpage will have no broken image be shown.</p>
<h3 id="the-tags-page">The Tags Page</h3>
<h4 id="picture-part">Picture Part</h4>
<p>  Since our goal is to build a website that shows pisture, it is very important to find a good way to show others the illusts. The <strong>Masonry Layouts</strong> comes to our mind.<br>
  The <strong>Masonry Layouts</strong> form is to place pictures on the page in many cols with the same width but the height is different. Probably like this:
<img src="file:///c:\Users\HP\Desktop\To learn\电类工程导论\Final_project\ICE2604_Final_Project\Final report\img\xjq_3.png" alt="">
  However, because of the size of the img we could get, it might be a little bit large to show so many pictures on one page. So we would just show two cols. Like this:
<img src="file:///c:\Users\HP\Desktop\To learn\电类工程导论\Final_project\ICE2604_Final_Project\Final report\img\xjq_4.png" alt="">
  Here's some details about the page.<br>
  To keep the order of the pictures, we could not just do it with <strong>css</strong>, instead, we would have to do it with <strong>js</strong> and <strong>css</strong>.<br>
  First of all, constrain the width of the img with <strong>css</strong>. Next, define the <code>checkFlag</code> function to reset the pictures when the <code>document</code> is <code>onload</code>. In this function, I'd have to compute the num of pictures of each column. Also, we had to reset the height of container to display the pictures seperately.<br>
  After doing this, the pictures is already in the form of <strong>Masonry Layouts</strong>. However, the num of the pictures is fixed. What we want is the type of Masonry Layouts that is endless. That would pour more and more pictures when the user scroll to the bottom of the page. In other word, the pictures must be loaded asynchronously. We have no idea about this so we would learn it from the beginning.<br>
  At that time didn't know <strong>js</strong> well. And the first idea that comes to real is using <strong>Ajax</strong>, the <strong>requests</strong> of <strong>js</strong>. Here's the basic code.</p>
<pre><code class="language-JavaScript"><div><span class="hljs-keyword">var</span> xmlhttp;
<span class="hljs-keyword">if</span> (<span class="hljs-built_in">window</span>.XMLHttpRequest){
    xmlhttp=<span class="hljs-keyword">new</span> XMLHttpRequest();
}
<span class="hljs-keyword">else</span>{
    xmlhttp=<span class="hljs-keyword">new</span> ActiveXObject(<span class="hljs-string">&quot;Microsoft.XMLHTTP&quot;</span>);
}
xmlhttp.onreadystatechange=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">if</span> (xmlhttp.readyState==<span class="hljs-number">4</span> &amp;&amp;xmlhttp.status==<span class="hljs-number">200</span>){
        imgData.data=<span class="hljs-built_in">eval</span>(xmlhttp.responseText);
    }
}
xmlhttp.open(<span class="hljs-string">&quot;GET&quot;</span>,<span class="hljs-string">&quot;/a?t=&quot;</span>+ <span class="hljs-built_in">Math</span>.random(),<span class="hljs-literal">true</span>);
xmlhttp.send();
</div></code></pre>
<p>  This is used to get the infomation of the imgs to be added to the page. However, the images we got was repeated. And we could not fix it. Out of no reason. But we came to realize that we didn't needed to do so. All we need is to write the <code>innerHTML</code> of the container in the proper time. And the infomation of the pictures could be included then the <strong>HTML</strong> is rendered. Using <code>Flask.render_templates</code>. Just like this:</p>
<pre><code class="language-js"><div><span class="hljs-keyword">var</span> imgData={
    <span class="hljs-string">&quot;data&quot;</span>:[
      {% <span class="hljs-keyword">for</span> flask_ <span class="hljs-keyword">in</span> flask_datas %}
        {<span class="hljs-string">&quot;src&quot;</span>:<span class="hljs-string">&quot;{[flask_[1]]}&quot;</span>,<span class="hljs-string">&quot;id&quot;</span>:<span class="hljs-string">&quot;{[flask_[0]]}&quot;</span>,<span class="hljs-string">&quot;tsrc&quot;</span>:<span class="hljs-string">&quot;{[flask_[2]]}&quot;</span>},
      {% endfor %}
    ]
}
</div></code></pre>
<p>  This woudn't cost much memery, since even a single picture is a lot larger than some simple text. So the problem comes to <strong>when to write</strong>.<br>
  The answer is the time you scroll to the bottom of the page. So we defined a function named <code>check_bottom</code> , whitch computes the position of the scrollbar and add picture to the page.</p>
<pre><code class="language-js"><div><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">check_bottom</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">if</span>((<span class="hljs-built_in">document</span>.body.scrollTop+<span class="hljs-built_in">document</span>.body.clientHeight-<span class="hljs-built_in">document</span>.body.scrollHeight&gt;-<span class="hljs-built_in">document</span>.body.clientHeight/<span class="hljs-number">2</span>)&amp;&amp;(<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;container&quot;</span>).lastChild.firstChild.firstChild.firstChild.complete)){
        <span class="hljs-keyword">var</span> cparent=<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;container&quot;</span>);
        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i=<span class="hljs-number">0</span>;(i&lt;<span class="hljs-number">2</span>)&amp;&amp;(gonelen&lt;imgData.data.length);i++,gonelen++){
            <span class="hljs-keyword">if</span>((imgData.data[gonelen].src!=<span class="hljs-string">&quot;None&quot;</span>))cparent.innerHTML+=<span class="hljs-string">&quot;&lt;a href=&#x27;/illust?id=&quot;</span>+imgData.data[gonelen].id+<span class="hljs-string">&quot;&#x27;&gt;&lt;div class=&#x27;box&#x27;&gt;&lt;div class=&#x27;box_img&#x27;&gt;&lt;img src=&#x27;&quot;</span>+imgData.data[gonelen].tsrc+<span class="hljs-string">&quot;&#x27; onerror=&#x27;imgerrorfun(\&quot;&quot;</span>+imgData.data[gonelen].src+<span class="hljs-string">&quot;\&quot;)&#x27;/&gt;&lt;/div&gt;&lt;/div&gt;&lt;/a&gt;&quot;</span>;
        }
    }
}
</div></code></pre>
<p>  Also, the function is used repeatly. So we need to <code>var clo2=self.setInterval('check_bottom()',500);</code> to call it each 500ms.<br>
  Then comes the problem that the newly added picture is not well located. My solution is to call <code>check_bottom</code> every 500ms too.<br>
  Now the pictures could be shown nicely.</p>
<h4 id="tags-part">Tags Part</h4>
<p>  The item that inspired us about this part is the output of the search part of <strong>bilibili</strong>.<br>
<img src="file:///c:\Users\HP\Desktop\To learn\电类工程导论\Final_project\ICE2604_Final_Project\Final report\img\xjq_5.png" alt=""></p>
<center><img src="file:///c:\Users\HP\Desktop\To learn\电类工程导论\Final_project\ICE2604_Final_Project\Final report\img\xjq_6.png" height=200px></img></center>
<p>  By then we thought I've got some idea about <strong>js</strong>, so we decided to write it with pure <strong>js</strong>.<br>
  Listing all of the tags is terrible, so the tags here will only contains tags that be used more than 50 times.<br>
  You will find that the cyua buttons could change it's color if you click it. That means the tags be included or forbidden when you click the &quot;确定&quot; button.<br>
  When it's cyua, it's neither selected nor forbidden. When it's lime, it's selected. When it's gray, it's forbidden.</p>
<pre><code class="language-js"><div>tags_set=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>([{% <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> _the_tags%}<span class="hljs-string">&quot;{[i]}&quot;</span>,{% endfor %}]);
ftags_set=<span class="hljs-keyword">new</span> <span class="hljs-built_in">Set</span>([{% <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> _the_ftags%}<span class="hljs-string">&quot;{[i]}&quot;</span>,{% endfor %}]);
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addtag</span>(<span class="hljs-params">tag</span>)</span>{
    <span class="hljs-keyword">if</span>(tags_set.has(tag)){tags_set.delete(tag);<span class="hljs-built_in">document</span>.getElementById(tag).style[<span class="hljs-string">&quot;background-color&quot;</span>]=<span class="hljs-string">&quot;gray&quot;</span>;ftags_set.add(tag);}
    <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(ftags_set.has(tag)){ftags_set.delete(tag);<span class="hljs-built_in">document</span>.getElementById(tag).style[<span class="hljs-string">&quot;background-color&quot;</span>]=<span class="hljs-string">&quot;cyan&quot;</span>}
    <span class="hljs-keyword">else</span>{tags_set.add(tag);<span class="hljs-built_in">document</span>.getElementById(tag).style[<span class="hljs-string">&quot;background-color&quot;</span>]=<span class="hljs-string">&quot;lime&quot;</span>;}
}
...
...
    {% <span class="hljs-keyword">for</span> tag <span class="hljs-keyword">in</span> tags%}&lt;div <span class="hljs-class"><span class="hljs-keyword">class</span></span>=<span class="hljs-string">&quot;tag_sel&quot;</span> onclick=<span class="hljs-string">&quot;addtag(&#x27;{[tag]}&#x27;);&quot;</span> id=<span class="hljs-string">&quot;{[tag]}&quot;</span>&gt;{[tag]}&lt;/div&gt;{% endfor %}
...
</div></code></pre>
<p>  <code>tags_set</code> contains all lime tags, which means selected. <code>ftags_set</code> contains all gray tags, which means forbidden.<br>
  And here's the relation between output and two types of tags:</p>
<p class="katex-block"><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>o</mi><mi>u</mi><mi>t</mi><mi>p</mi><mi>u</mi><mi>t</mi><mo>=</mo><munderover><mo>⋂</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><mi>t</mi><mi>a</mi><mi>g</mi><mi>s</mi><mi mathvariant="normal">_</mi><mi>s</mi><mi>e</mi><mi>t</mi><mo>−</mo><munderover><mo>⋃</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></munderover><mi>f</mi><mi>t</mi><mi>a</mi><mi>g</mi><mi>s</mi><mi mathvariant="normal">_</mi><mi>s</mi><mi>e</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">output=\bigcap_{i=1}^n tags\_set-\bigcup_{i=1}^m ftags\_set
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.80952em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">o</span><span class="mord mathnormal">u</span><span class="mord mathnormal">tp</span><span class="mord mathnormal">u</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.929066em;vertical-align:-1.277669em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6513970000000002em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">⋂</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.277669em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">t</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">s</span><span class="mord" style="margin-right:0.02778em;">_</span><span class="mord mathnormal">se</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.929066em;vertical-align:-1.277669em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6513970000000002em;"><span style="top:-1.872331em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">⋃</span></span></span><span style="top:-4.3000050000000005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.277669em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.10764em;">f</span><span class="mord mathnormal">t</span><span class="mord mathnormal">a</span><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="mord mathnormal">s</span><span class="mord" style="margin-right:0.02778em;">_</span><span class="mord mathnormal">se</span><span class="mord mathnormal">t</span></span></span></span></span></p>
<p>(Ps:The R-18 tags is forbidden by default)<br>
  This is done with python at the server:</p>
<pre><code class="language-python"><div>tags=request.args.get(<span class="hljs-string">&quot;tags&quot;</span>,<span class="hljs-string">&quot;&quot;</span>).strip()
ftags=request.args.get(<span class="hljs-string">&quot;ftags&quot;</span>,<span class="hljs-string">&quot;&quot;</span>).strip()
_tags=[]
_ftags=[]
<span class="hljs-keyword">if</span> <span class="hljs-keyword">not</span> <span class="hljs-string">&quot;R-18&quot;</span> <span class="hljs-keyword">in</span> tags <span class="hljs-keyword">and</span> <span class="hljs-keyword">not</span> <span class="hljs-string">&quot;R-18&quot;</span> <span class="hljs-keyword">in</span> ftags:
    ftags+=<span class="hljs-string">&quot;,R-18&quot;</span>
<span class="hljs-keyword">if</span> tags:
    candi=set()
    flag=<span class="hljs-literal">False</span>
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> tags.split(<span class="hljs-string">&#x27;,&#x27;</span>):
        i=i.strip()
        <span class="hljs-keyword">if</span> i:
            _tags.append(i)
            <span class="hljs-keyword">if</span> flag:
                candi=candi&amp;d_top_tags[i]
            <span class="hljs-keyword">else</span>:
                candi=d_top_tags[i].copy()
                flag=<span class="hljs-literal">True</span>
<span class="hljs-keyword">else</span>:
    candi=d_id.copy()
<span class="hljs-keyword">if</span> ftags:
    <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> ftags.split(<span class="hljs-string">&#x27;,&#x27;</span>):
        i=i.strip()
        <span class="hljs-keyword">if</span> i:
            _ftags.append(i)
            candi=candi-d_top_tags[i]
ret= [[i,d_url_foruse[i],func(d_url_foruse[i],i)] <span class="hljs-keyword">for</span> i <span class="hljs-keyword">in</span> candi]
</div></code></pre>
<p>  By the way, the &quot;确定&quot; button is obtained without using <code>&lt;form&gt;</code>, instead, it uses <code>window.location.href=&quot;...&quot;;</code> like this:</p>
<pre><code class="language-js"><div><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">redire</span>(<span class="hljs-params"></span>)</span>{
    <span class="hljs-keyword">var</span> _tags=<span class="hljs-string">&#x27;&#x27;</span>;
    <span class="hljs-keyword">var</span> _ftags=<span class="hljs-string">&#x27;&#x27;</span>;
    <span class="hljs-keyword">for</span>(i <span class="hljs-keyword">of</span> tags_set)_tags+=i+<span class="hljs-string">&#x27;,&#x27;</span>;
    <span class="hljs-keyword">for</span>(i <span class="hljs-keyword">of</span> ftags_set)_ftags+=i+<span class="hljs-string">&#x27;,&#x27;</span>;
    <span class="hljs-built_in">window</span>.location.href=<span class="hljs-string">&quot;tags?tags=&quot;</span>+_tags+<span class="hljs-string">&quot;&amp;ftags=&quot;</span>+_ftags;
}
</div></code></pre>
<h3 id="the-map-page">The Map Page</h3>
<h4 id="zoom-of-map">Zoom of Map</h4>
<p>  We copied the code from <a href="https://github.com/bumbu/svg-pan-zoom">svg-pan-zoom</a>, so there's nothing much to talk about.<br>
  Also, we noticed that some pages of acemap seems also used the same zoomimg method.</p>
<table>
<thead>
<tr>
<th style="text-align:center">svg-pan-zoom</th>
<th style="text-align:center">CCFConfCompare</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="file:///c:\Users\HP\Desktop\To learn\电类工程导论\Final_project\ICE2604_Final_Project\Final report\img\xjq_7.png" alt=""></td>
<td style="text-align:center"><img src="file:///c:\Users\HP\Desktop\To learn\电类工程导论\Final_project\ICE2604_Final_Project\Final report\img\xjq_8.png" alt=""></td>
</tr>
</tbody>
</table>
<h4 id="show-of-map">Show of Map</h4>
<p>  Because of the relations of the illustors is too complicated and many of them are followed and are following too many people. The edges of the graph is just too much. And will be hard to zoom or drag or find anything useful. My solution to this problem is to hide all the edges and only show edges that are related to the node selected.<br>
  Thanks to the form of the output of <strong>gephi</strong>, each nodes has it's <strong>id</strong> and each nodes has it's targets in it's <code>class</code>.</p>
<pre><code class="language-html"><div><span class="hljs-tag">&lt;<span class="hljs-name">path</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;id_10292 id_3079252&quot;</span> <span class="hljs-attr">d</span>=<span class="hljs-string">&quot;M -151.112381,530.487549 L -314.106415,-545.153503&quot;</span> <span class="hljs-attr">fill</span>=<span class="hljs-string">&quot;none&quot;</span> <span class="hljs-attr">stroke</span>=<span class="hljs-string">&quot;#b29b6c&quot;</span> <span class="hljs-attr">stroke-opacity</span>=<span class="hljs-string">&quot;0.4&quot;</span> <span class="hljs-attr">stroke-width</span>=<span class="hljs-string">&quot;1.0&quot;</span> <span class="hljs-attr">style</span>=<span class="hljs-string">&quot;display:none;&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">path</span>&gt;</span>
...
<span class="hljs-tag">&lt;<span class="hljs-name">circle</span> <span class="hljs-attr">class</span>=<span class="hljs-string">&quot;id_2074388&quot;</span> <span class="hljs-attr">cx</span>=<span class="hljs-string">&quot;686.12494&quot;</span> <span class="hljs-attr">cy</span>=<span class="hljs-string">&quot;-1027.0114&quot;</span> <span class="hljs-attr">fill</span>=<span class="hljs-string">&quot;#00c7ff&quot;</span> <span class="hljs-attr">fill-opacity</span>=<span class="hljs-string">&quot;1.0&quot;</span> <span class="hljs-attr">r</span>=<span class="hljs-string">&quot;7.6373625&quot;</span> <span class="hljs-attr">stroke</span>=<span class="hljs-string">&quot;#000000&quot;</span> <span class="hljs-attr">stroke-opacity</span>=<span class="hljs-string">&quot;1.0&quot;</span> <span class="hljs-attr">stroke-width</span>=<span class="hljs-string">&quot;1.0&quot;</span>&gt;</span><span class="hljs-tag">&lt;/<span class="hljs-name">circle</span>&gt;</span>
</div></code></pre>
<p>  So we could select out the edges and nodes easily using <code>querySelector</code>.</p>
<pre><code class="language-js"><div><span class="hljs-keyword">var</span> masks = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;node-labels&quot;</span>).querySelectorAll(<span class="hljs-string">&quot;text&quot;</span>);
<span class="hljs-keyword">var</span> masks2 = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;nodes&quot;</span>).querySelectorAl(<span class="hljs-string">&quot;circle&quot;</span>);
<span class="hljs-keyword">var</span> masks3 = <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;node-labels-outline&quot;</span>)querySelectorAll(<span class="hljs-string">&quot;text&quot;</span>);
<span class="hljs-keyword">var</span> idnow=<span class="hljs-string">&quot;_&quot;</span>;
masks.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">elem</span>)</span>{
    elem.style.cursor=<span class="hljs-string">&quot;pointer&quot;</span>;
    elem.onmouseover=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
        <span class="hljs-keyword">if</span>(idnow==<span class="hljs-string">&quot;_&quot;</span>){
            masks2.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">_</span>)</span>{
                <span class="hljs-keyword">if</span>(_.attributes.class.nodeValue!=elem.attributes.class.nodeValue)
                _.style.display=<span class="hljs-string">&quot;none&quot;</span>;
            })
            masks.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">_</span>)</span>{
                <span class="hljs-keyword">if</span>(_.attributes.class.nodeValue!=elem.attributes.class.nodeValue)
                _.style.display=<span class="hljs-string">&quot;none&quot;</span>;
            })
            masks3.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">_</span>)</span>{
                <span class="hljs-keyword">if</span>(_.attributes.class.nodeValue!=elem.attributes.class.nodeValue)
                _.style.display=<span class="hljs-string">&quot;none&quot;</span>;
            })
            <span class="hljs-built_in">Array</span>.from(<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;edges&quot;</span>).getElementsByClassName(elem.attributes.class.nodeValue)).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">line</span>)</span>{
                <span class="hljs-keyword">if</span>(line.classList[<span class="hljs-number">0</span>]==elem.attributes.class.nodeValue){
                    <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;nodes&quot;</span>).getElementsByClassName(line.classList[<span class="hljs-number">1</span>])[<span class="hljs-number">0</span>].style.display=<span class="hljs-string">&quot;block&quot;</span>;
                    <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;node-labels&quot;</span>).getElementsByClassName(line.classList[<span class="hljs-number">1</span>])[<span class="hljs-number">0</span>].style.display=<span class="hljs-string">&quot;block&quot;</span>;
                    <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;node-labels-outline&quot;</span>).getElementsByClassName(line.classList[<span class="hljs-number">1</span>])[<span class="hljs-number">0</span>].style.display=<span class="hljs-string">&quot;block&quot;</span>;
                    line.style.display=<span class="hljs-string">&quot;block&quot;</span>;
                }
            });
        }
    }
    elem.onmouseout=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
        <span class="hljs-keyword">if</span>(idnow==<span class="hljs-string">&quot;_&quot;</span>){
            masks2.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">_</span>)</span>{
                _.style.display=<span class="hljs-string">&quot;block&quot;</span>;
            })
            masks.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">_</span>)</span>{
                _.style.display=<span class="hljs-string">&quot;block&quot;</span>;
            })
            masks3.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">_</span>)</span>{
                _.style.display=<span class="hljs-string">&quot;block&quot;</span>;
            })
            <span class="hljs-built_in">Array</span>.from(<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;edges&quot;</span>).getElementsByClassName(elem.attributes.class.nodeValue)).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">line</span>)</span>{
                line.style.display=<span class="hljs-string">&quot;none&quot;</span>;
            });
        }
    }
    elem.onclick=<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>{
        <span class="hljs-keyword">if</span>(idnow==<span class="hljs-string">&quot;_&quot;</span>){
            idnow=elem.attributes.class.nodeValue;
            masks2.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">_</span>)</span>{
                <span class="hljs-keyword">if</span>(_.attributes.class.nodeValue!=elem.attributes.class.nodeValue)
                _.style.display=<span class="hljs-string">&quot;none&quot;</span>;
            })
            masks.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">_</span>)</span>{
                <span class="hljs-keyword">if</span>(_.attributes.class.nodeValue!=elem.attributes.class.nodeValue)
                _.style.display=<span class="hljs-string">&quot;none&quot;</span>;
            })
            masks3.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">_</span>)</span>{
                <span class="hljs-keyword">if</span>(_.attributes.class.nodeValue!=elem.attributes.class.nodeValue)
                _.style.display=<span class="hljs-string">&quot;none&quot;</span>;
            })
            <span class="hljs-built_in">Array</span>.from(<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;edges&quot;</span>).getElementsByClassName(elem.attributes.class.nodeValue)).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">line</span>)</span>{
                <span class="hljs-keyword">if</span>(line.classList[<span class="hljs-number">0</span>]==elem.attributes.class.nodeValue){
                    <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;nodes&quot;</span>).getElementsByClassName(line.classList[<span class="hljs-number">1</span>])[<span class="hljs-number">0</span>].style.display=<span class="hljs-string">&quot;block&quot;</span>;
                    <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;node-labels&quot;</span>).getElementsByClassName(line.classList[<span class="hljs-number">1</span>])[<span class="hljs-number">0</span>].style.display=<span class="hljs-string">&quot;block&quot;</span>;
                    <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;node-labels-outline&quot;</span>).getElementsByClassName(line.classList[<span class="hljs-number">1</span>])[<span class="hljs-number">0</span>].style.display=<span class="hljs-string">&quot;block&quot;</span>;
                    line.style.display=<span class="hljs-string">&quot;block&quot;</span>;
                }
            });
        }
        <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(idnow==elem.attributes.class.nodeValue){
            idnow=<span class="hljs-string">&quot;_&quot;</span>;
            masks2.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">_</span>)</span>{
                _.style.display=<span class="hljs-string">&quot;block&quot;</span>;
            })
            masks.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">_</span>)</span>{
                _.style.display=<span class="hljs-string">&quot;block&quot;</span>;
            })
            masks3.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">_</span>)</span>{
                _.style.display=<span class="hljs-string">&quot;block&quot;</span>;
            })
            <span class="hljs-built_in">Array</span>.from(<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;edges&quot;</span>).getElementsByClassName(elem.attributes.class.nodeValue)).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">line</span>)</span>{
                line.style.display=<span class="hljs-string">&quot;none&quot;</span>;
            });
        }
        <span class="hljs-keyword">else</span>{
            masks2.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">_</span>)</span>{
                _.style.display=<span class="hljs-string">&quot;block&quot;</span>;
            })
            masks.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">_</span>)</span>{
                _.style.display=<span class="hljs-string">&quot;block&quot;</span>;
            })
            masks3.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">_</span>)</span>{
                _.style.display=<span class="hljs-string">&quot;block&quot;</span>;
            })
            <span class="hljs-built_in">Array</span>.from(<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;edges&quot;</span>).getElementsByClassName(idnow)).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">line</span>)</span>{
                line.style.display=<span class="hljs-string">&quot;none&quot;</span>;
            });
            idnow=elem.attributes.class.nodeValue;
            masks2.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">_</span>)</span>{
                <span class="hljs-keyword">if</span>(_.attributes.class.nodeValue!=elem.attributes.class.nodeValue)
                _.style.display=<span class="hljs-string">&quot;none&quot;</span>;
            })
            masks.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">_</span>)</span>{
                <span class="hljs-keyword">if</span>(_.attributes.class.nodeValue!=elem.attributes.class.nodeValue)
                _.style.display=<span class="hljs-string">&quot;none&quot;</span>;
            })
            masks3.forEach(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">_</span>)</span>{
                <span class="hljs-keyword">if</span>(_.attributes.class.nodeValue!=elem.attributes.class.nodeValue)
                _.style.display=<span class="hljs-string">&quot;none&quot;</span>;
            })
            <span class="hljs-built_in">Array</span>.from(<span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;edges&quot;</span>).getElementsByClassName(elem.attributes.class.nodeValue)).forEach(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">line</span>)</span>{
                <span class="hljs-keyword">if</span>(line.classList[<span class="hljs-number">0</span>]==elem.attributes.class.nodeValue){
                    <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;nodes&quot;</span>).getElementsByClassName(line.classList[<span class="hljs-number">1</span>])[<span class="hljs-number">0</span>].style.display=<span class="hljs-string">&quot;block&quot;</span>;
                    <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;node-labels&quot;</span>).getElementsByClassName(line.classList[<span class="hljs-number">1</span>])[<span class="hljs-number">0</span>].style.display=<span class="hljs-string">&quot;block&quot;</span>;
                    <span class="hljs-built_in">document</span>.getElementById(<span class="hljs-string">&quot;node-labels-outline&quot;</span>).getElementsByClassName(line.classList[<span class="hljs-number">1</span>])[<span class="hljs-number">0</span>].style.display=<span class="hljs-string">&quot;block&quot;</span>;
                    line.style.display=<span class="hljs-string">&quot;block&quot;</span>;
                }
            });
        }
    }
})
</div></code></pre>
<hr>
<h2 id="team-cooperation">Team cooperation</h2>
<h3 id="source-code-management">Source Code Management</h3>
<p>  We managed our code with git and a GUI tool: source tree. So far, there are 72 commits, and every group member has made commit to the repository.<br>
<img src="file:///c:\Users\HP\Desktop\To learn\电类工程导论\Final_project\ICE2604_Final_Project\Final report\img\git.png"></img></p>
<h3 id="database">Database</h3>
<p>  We put our data on the cloud server of Alilibaba, so every member has access to the latest data.</p>
<hr>
<h2 id="future-work">Future work</h2>
<h3 id="illustration-feature">Illustration Feature</h3>
<p>  The hash function used on illustrators doesn't discriminate illustrations well.<br>
<img src="file:///c:\Users\HP\Desktop\To learn\电类工程导论\Final_project\ICE2604_Final_Project\Final report\img\illust_hash.png"></img><br>
  Current features are all based on illustration tags, rather than illustration itself. So next step, we can apply computer vision method,
such as ResNet or AlexNet.</p>
<h3 id="make-it-more-interactive">Make it More Interactive</h3>
<p>  Most of the page is just representing the data or image, And make it a little bit boring.<br>
  Some Interactive elements can be add to attract visitors.</p>
<h3 id="handle-synonymous-tags">Handle Synonymous Tags</h3>
<p>  There are many synonymous tags in our data. However, the PCA algorithm can't tell if two tags hane the same meaning. For example, following four tags all refer to the same character.<br>
<img src="file:///c:\Users\HP\Desktop\To learn\电类工程导论\Final_project\ICE2604_Final_Project\Final report\img\synonymous_tags.png"></img>
  NLP method should be applied to find these tags of similar meanings. For example, GloVe can construct coexistence matrix, thus find the words that most likely to have the same meaning.<br>
<img src="file:///c:\Users\HP\Desktop\To learn\电类工程导论\Final_project\ICE2604_Final_Project\Final report\img\glove.png"></img></p>
<hr>
<h2 id="duty">Duty</h2>
<ul>
<li>Data and crawler: 黄川懿，薛家奇，黄浩栩</li>
<li>Search engine: 黄浩栩</li>
<li>Visualization: 王鹏飞，向天乐，薛家奇</li>
<li>Website: 黄川懿，向天乐，薛家奇，黄浩栩</li>
</ul>

    </body>
    </html>