<!DOCTYPE html>
<html style="font-size: 16px;">
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="utf-8">
    <meta name="keywords" content="Illustration &amp;amp; Art Guide">
    <meta name="description" content="">
    <meta name="page_type" content="np-template-header-footer-from-plugin">
    <title>Tags</title>
    <link rel="stylesheet" href="/static/nicepage.css" media="screen">
<link rel="stylesheet" href="/static/Tags.css" media="screen">
    <script class="u-script" type="text/javascript" src="/static/jquery.js" defer=""></script>
    <script class="u-script" type="text/javascript" src="/static/nicepage.js" defer=""></script>
    <meta name="generator" content="Nicepage 4.1.0, nicepage.com">
    <link id="u-theme-google-font" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i|Open+Sans:300,300i,400,400i,600,600i,700,700i,800,800i">
    <link href="/static/example.css" rel="stylesheet">
        <link href="/static/headers.css" rel="stylesheet">
        <link rel="stylesheet" href="/static/sidebars.css">
        <!-- drag -->
        <script src="/static/drag.js"></script>
 
        
  <script src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>
  <script>
    function imgerrorfun(x){
        var img=event.srcElement;
        img.src=x;
        img.onerror=null;
    }
  </script>
  <style>
      *{
        margin: 0px;
        padding: 0px;
        }
        #container{
        position: relative;
        }
        body{
                background-color:rgb(171, 235, 243);
        }
        .box{
        padding: 5px;
        float: left;
        margin: 0px auto;
        }
        .box_img{
        padding: 5px;
        background-color: white;
        border: 1px solid #DCDCDC;
        box-shadow: 0 0 5px #ccc;
        border-radius: 5px;
        }
        .box_img:hover{
				box-shadow: 0 0 10px gray;
			}
        .box_img img{
        width: 500px;
        }
        /*********LoadingPage*************/

    #loading {
      position: absolute;
      background-color: #FFF;
      top: 0px;
      left: 0px;
      width: 100%;
      height: 100%;
      z-index: 9999;
    }
    #loading_bg{
      background-color: rgba(0,0,0,0.7);
    }

    .loader {
      width: 250px;
      height: 50px;
      line-height: 50px;
      text-align: center;
      position: absolute;
      top: 50%;
      left: 50%;
      -webkit-transform: translate(-50%, -50%);
      transform: translate(-50%, -50%);
      font-family: helvetica, arial, sans-serif;
      text-transform: uppercase;
      font-weight: 900;
      color: #ce4233;
      letter-spacing: 0.2em;
    }
    .loader::before, .loader::after {
      content: "";
      display: block;
      width: 15px;
      height: 15px;
      background: #ce4233;
      position: absolute;
      -webkit-animation: load .7s infinite alternate ease-in-out;
      animation: load .7s infinite alternate ease-in-out;
    }
    .loader::before {
      top: 0;
    }
    .loader::after {
      bottom: 0;
    }

    @-webkit-keyframes load {
      0% {
        left: 0;
        height: 30px;
        width: 15px;
      }
      50% {
        height: 8px;
        width: 40px;
      }
      100% {
        left: 235px;
        height: 30px;
        width: 15px;
      }
    }

    @keyframes load {
      0% {
        left: 0;
        height: 30px;
        width: 15px;
      }
      50% {
        height: 8px;
        width: 40px;
      }
      100% {
        left: 235px;
        height: 30px;
        width: 15px;
      }
    }

    /********************************/
    /* .left{
      top: 0;
        height: 100vh;
        border-right: 1px solid gold;
        overflow:auto;
        position: fixed;
        width: 14vw;
    }
    .left div{
        width: 100%;
        height: 200px;
        text-align: center;
        align-items:center;
        overflow: hidden;
    } */
/* ********************************** */
    .tag_sel{
      background-color: cyan;border: 1px solid black;margin: 5px;border-radius: 5%;box-shadow: 0 0 3px;user-select: none;cursor:pointer;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;
    }
  </style>
  <script>
      function getRandomArrayElements(arr, count) {
var shuffled = arr.slice(0), i = arr.length, min = i - count, temp, index;
while (i-- > min) {
index = Math.floor((i + 1) * Math.random());
temp = shuffled[index];
shuffled[index] = shuffled[i];
shuffled[i] = temp;
}
return shuffled.slice(min);
}
    var gonelen=0;
    
  var imgData={
    "data":[
      {% for flask_ in flask_datas %}{"src":"{[flask_[1]]}","id":"{[flask_[0]]}","tsrc":"{[flask_[2]]}"},{% endfor %}
    ]
    }
function check_bottom(){
    if((document.body.scrollTop+document.body.clientHeight-document.body.scrollHeight>-document.body.clientHeight/2)&&(document.getElementById("container").lastChild.firstChild.firstChild.firstChild.complete)){
        var cparent=document.getElementById("container");
        for(var i=0;(i<2)&&(gonelen<imgData.data.length);i++,gonelen++){
        if((imgData.data[gonelen].src!="None"))cparent.innerHTML+="<a  href='/illust?id="+imgData.data[gonelen].id+"'><div class='box'><div class='box_img'><img src='"+imgData.data[gonelen].tsrc+"' onerror='imgerrorfun(\""+imgData.data[gonelen].src+"\")'/></div></div></a>";
    }
    }
}
      window.onload=function(){
    var clo=self.setInterval('imgLocation("container","box")',500);
    var clo2=self.setInterval('check_bottom()',500);
      window.onscroll=function(){
   if(checkFlag()&&(document.getElementById("container").lastChild.firstChild.firstChild.firstChild.complete)){
    var cparent=document.getElementById("container");
    for(var i=0;(i<2)&&(gonelen<imgData.data.length);i++,gonelen++){
    if((imgData.data[gonelen].src!="None"))cparent.innerHTML+="<a  href='/illust?id="+imgData.data[gonelen].id+"'><div class='box'><div class='box_img'><img src='"+imgData.data[gonelen].tsrc+"' onerror='imgerrorfun(\""+imgData.data[gonelen].src+"\")'/></div></div></a>";
    }
   }
  }
 }
  
 function checkFlag(){
  var cparent=document.getElementById("container");
  var ccontent=getChildElement(cparent,"box");//图片的所有box数
  var lastContentHeight=ccontent[ccontent.length-1].offsetTop;//最后一张图片距离顶部高度
  var scrollTop=document.documentElement.scrollTop||document.body.scrollTop;//滚动条距离顶部高度
  var pageHeight=document.documentElement.clientHeight||document.body.clientHeight;//屏幕高度
 // console.log(lastContentHeight+","+scrollTop+","+pageHeight);
  if(lastContentHeight<scrollTop+pageHeight){
   return true;
  }
 }
  
 function imgLocation(parent,content){
  var cparent=document.getElementById(parent);
  var ccontent=getChildElement(cparent,content);//图片的所有box数
  var imgWidth=ccontent[0].offsetWidth;//图片宽度
  var num=Math.floor(document.documentElement.clientWidth/imgWidth);//一行放图片个数
  cparent.style.cssText="width:"+imgWidth*num+"px;margin:0px auto";//container的宽度
  var boxHeightArr=[];//每一列box高度
  for(var i=0;i<ccontent.length;i++){
   if(i<num){
    boxHeightArr[i]=ccontent[i].offsetHeight;
   }else{
    var minHeight=Math.min.apply(null,boxHeightArr);//最小高度
    var minIndex = getMinheightLocation(boxHeightArr,minHeight);//得到最小高度下标
 //   console.log(minHeight+","+minIndex);
    ccontent[i].style.position="absolute";
    ccontent[i].style.top=minHeight+"px";//距离顶部高度
    ccontent[i].style.left=ccontent[minIndex].offsetLeft+"px";//距离左边长度
    boxHeightArr[minIndex]+=ccontent[i].offsetHeight;
 //   console.log(ccontent[i].offsetHeight+","+ccontent[i].height);//ccontent[i].height=undefined
     
   }
  }
 }
  
 function getMinheightLocation(boxHeightArr,minHeight){
  for(var i in boxHeightArr){
   if(boxHeightArr[i]==minHeight){
    return i
   }
  }
 }
  
 function getChildElement(parent,content){
  //将parent下有content的全部取出
  var contentArr=[];
  var allContent=parent.getElementsByTagName("*");
  for(i=0;i<allContent.length;i++){
   if(allContent[i].className=="box"){
    contentArr.push(allContent[i]);
   }
  }
  return contentArr;
 }
 
  </script>
 </head>
 <body class="u-body u-overlap u-overlap-contrast">
  <div id="loading">
    <div id="loading_bg">
        <div class="loader">Loading...</div>
    </div>
</div>
  <header class="u-align-center-xs u-border-1 u-border-grey-25 u-clearfix u-header u-header" id="sec-d1d3"><div class="u-clearfix u-sheet u-sheet-1">
    <a href="https://nicepage.com" class="u-image u-logo u-image-1" data-image-width="1080" data-image-height="1080">
      <img src="/static/images/20211223145559.png" class="u-logo-image u-logo-image-1">
    </a>
    <form action="#" method="get" class="u-border-1 u-border-grey-15 u-search u-search-right u-search-1">
      <button class="u-search-button" type="submit">
        <span class="u-search-icon u-spacing-10 u-text-grey-40">
          <svg class="u-svg-link" preserveAspectRatio="xMidYMin slice" viewBox="0 0 56.966 56.966" style=""><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#svg-b04b"></use></svg>
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="svg-b04b" x="0px" y="0px" viewBox="0 0 56.966 56.966" style="enable-background:new 0 0 56.966 56.966;" xml:space="preserve" class="u-svg-content"><path d="M55.146,51.887L41.588,37.786c3.486-4.144,5.396-9.358,5.396-14.786c0-12.682-10.318-23-23-23s-23,10.318-23,23  s10.318,23,23,23c4.761,0,9.298-1.436,13.177-4.162l13.661,14.208c0.571,0.593,1.339,0.92,2.162,0.92  c0.779,0,1.518-0.297,2.079-0.837C56.255,54.982,56.293,53.08,55.146,51.887z M23.984,6c9.374,0,17,7.626,17,17s-7.626,17-17,17  s-17-7.626-17-17S14.61,6,23.984,6z"></path><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>
        </span>
      </button>
      <input class="u-search-input" type="search" name="search" value="" placeholder="Search">
    </form>
    <nav class="u-align-left u-menu u-menu-dropdown u-nav-spacing-25 u-offcanvas u-menu-1">
      <div class="menu-collapse">
        <a class="u-button-style u-nav-link" href="#" style="padding: 4px 0px; font-size: calc(1em + 8px);">
          <svg class="u-svg-link" preserveAspectRatio="xMidYMin slice" viewBox="0 0 302 302" style=""><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#svg-7b92"></use></svg>
          <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" id="svg-7b92" x="0px" y="0px" viewBox="0 0 302 302" style="enable-background:new 0 0 302 302;" xml:space="preserve" class="u-svg-content"><g><rect y="36" width="302" height="30"></rect><rect y="236" width="302" height="30"></rect><rect y="136" width="302" height="30"></rect>
</g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g><g></g></svg>
        </a>
      </div>
      <div class="u-custom-menu u-nav-container">
        <ul class="u-nav u-unstyled u-nav-1"><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="/home" style="padding: 10px 20px;">Home</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="/static" style="padding: 10px 20px;">Statics</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="/picture" style="padding: 10px 20px;">Pictures</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="/search" style="padding: 10px 20px;">Search</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link u-text-active-palette-1-base u-text-hover-palette-2-base" href="/tags" style="padding: 10px 20px;">Tags</a>
</li></ul>
      </div>
      <div class="u-custom-menu u-nav-container-collapse">
        <div class="u-align-center u-black u-container-style u-inner-container-layout u-opacity u-opacity-95 u-sidenav">
          <div class="u-inner-container-layout u-sidenav-overflow">
            <div class="u-menu-close"></div>
            <ul class="u-align-center u-nav u-popupmenu-items u-unstyled u-nav-2"><li class="u-nav-item"><a class="u-button-style u-nav-link" href="/home" style="padding: 10px 20px;">Home</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="/static" style="padding: 10px 20px;">Statics</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="/picture" style="padding: 10px 20px;">Pictures</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="/search" style="padding: 10px 20px;">Search</a>
</li><li class="u-nav-item"><a class="u-button-style u-nav-link" href="/tags" style="padding: 10px 20px;">Tags</a>
</li></ul>
          </div>
        </div>
        <div class="u-black u-menu-overlay u-opacity u-opacity-70"></div>
      </div>
    </nav>
  </div></header>
  <section class="u-clearfix u-image u-shading u-section-1" id="carousel_f22a" data-image-width="1280" data-image-height="720">
    <div class="u-clearfix u-sheet u-sheet-1">
      <div class="u-border-2 u-border-white u-container-style u-expanded-width-md u-expanded-width-sm u-expanded-width-xs u-group u-similar-fill u-group-1">
        <div class="u-container-layout u-container-layout-1">
          <h1 class="u-align-center u-text u-text-1">Picture shown with Tags</h1>
        </div>
      </div>
    </div>
  </section>

  
<script>
  tags_set=new Set([{% for i in _the_tags%}"{[i]}",{% endfor %}]);
  ftags_set=new Set([{% for i in _the_ftags%}"{[i]}",{% endfor %}]);
  function addtag(tag){
    if(tags_set.has(tag)){tags_set.delete(tag);document.getElementById(tag).style["background-color"]="gray";ftags_set.add(tag);}
    else if(ftags_set.has(tag)){ftags_set.delete(tag);document.getElementById(tag).style["background-color"]="cyan"}
    else{tags_set.add(tag);document.getElementById(tag).style["background-color"]="lime";}
  }
  function redire(){
    var _tags='';
    var _ftags='';
    for(i of tags_set)_tags+=i+',';
    for(i of ftags_set)_ftags+=i+',';
    window.location.href="tags?tags="+_tags+"&ftags="+_ftags;
  }
</script>
<section class="u-clearfix u-section-2" id="sec-50f6">
  <div style="position: fixed;top: 2%;width: 12vw;right: -1.3vw;bottom: 16%;overflow-x: hidden;margin: 0;padding: 0;background-color: white;border: 1px solid #DCDCDC;box-shadow: 0 0 5px #ccc;border-radius: 5px;">
      {% for tag in tags%}<div class="tag_sel" onclick="addtag('{[tag]}');" id="{[tag]}">{[tag]}</div>{% endfor %}
  </div>
</section>
  <button style="position: fixed;top: 86%;bottom: 8%;right: 0vw;width: 10.7vw;" onclick="redire()">
      确定
  </button>
  <script>
    for(i of tags_set){
      document.getElementById(i).style["background-color"]="lime";
    }
    for(i of ftags_set){
      document.getElementById(i).style["background-color"]="gray";
    }
  </script>
  <div id="container"></div>
<script>
 var cparent=document.getElementById("container");
 for(var i=0;(i<20)&&(gonelen<imgData.data.length);i++,gonelen++){
  if((imgData.data[gonelen].src!="None"))cparent.innerHTML+="<a  href='/illust?id="+imgData.data[gonelen].id+"'><div class='box'><div class='box_img'><img src='"+imgData.data[gonelen].tsrc+"' onerror='imgerrorfun(\""+imgData.data[gonelen].src+"\")'/></div></div></a>";
 }
</script>
  <script>
    //Loading页面
document.onreadystatechange=function () {
          if (document.readyState=="complete"){
               loadingFade();
          }
}
function loadingFade() {
     var opacity=1;
     //var loadingPage=document.getElementById('loading');
     var loadingBackground=document.getElementById('loading_bg');
     var time=setInterval(function () {
          if (opacity<=0){
               clearInterval(time);
               //loadingPage.remove();
               $('#loading').remove();
          }

          loadingBackground.style.opacity=opacity;
          opacity-=0.4;
     },100);
}

  </script>
  <script>
  </script>
 </body>
</html>